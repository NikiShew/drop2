function getUrlParam(n) { n = n.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]"); var i = "[\\?&]" + n + "=([^&#]*)", r = new RegExp(i), t = r.exec(window.location.href); return t == null ? "" : t[1] } (function (n, t) { function i(t, i) { var u = t.nodeName.toLowerCase(); return "area" === u ? (i = t.parentNode, u = i.name, !t.href || !u || i.nodeName.toLowerCase() !== "map") ? !1 : (t = n("img[usemap=#" + u + "]")[0], !!t && r(t)) : (/input|select|textarea|button|object/.test(u) ? !t.disabled : "a" == u ? t.href || i : i) && r(t) } function r(t) { return !n(t).parents().andSelf().filter(function () { return n.curCSS(this, "visibility") === "hidden" || n.expr.filters.hidden(this) }).length } n.ui = n.ui || {}; n.ui.version || (n.extend(n.ui, { version: "1.8.15", keyCode: { ALT: 18, BACKSPACE: 8, CAPS_LOCK: 20, COMMA: 188, COMMAND: 91, COMMAND_LEFT: 91, COMMAND_RIGHT: 93, CONTROL: 17, DELETE: 46, DOWN: 40, END: 35, ENTER: 13, ESCAPE: 27, HOME: 36, INSERT: 45, LEFT: 37, MENU: 93, NUMPAD_ADD: 107, NUMPAD_DECIMAL: 110, NUMPAD_DIVIDE: 111, NUMPAD_ENTER: 108, NUMPAD_MULTIPLY: 106, NUMPAD_SUBTRACT: 109, PAGE_DOWN: 34, PAGE_UP: 33, PERIOD: 190, RIGHT: 39, SHIFT: 16, SPACE: 32, TAB: 9, UP: 38, WINDOWS: 91 } }), n.fn.extend({ propAttr: n.fn.prop || n.fn.attr, _focus: n.fn.focus, focus: function (t, i) { return typeof t == "number" ? this.each(function () { var r = this; setTimeout(function () { n(r).focus(); i && i.call(r) }, t) }) : this._focus.apply(this, arguments) }, scrollParent: function () { var t; return t = n.browser.msie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? this.parents().filter(function () { return /(relative|absolute|fixed)/.test(n.curCSS(this, "position", 1)) && /(auto|scroll)/.test(n.curCSS(this, "overflow", 1) + n.curCSS(this, "overflow-y", 1) + n.curCSS(this, "overflow-x", 1)) }).eq(0) : this.parents().filter(function () { return /(auto|scroll)/.test(n.curCSS(this, "overflow", 1) + n.curCSS(this, "overflow-y", 1) + n.curCSS(this, "overflow-x", 1)) }).eq(0), /fixed/.test(this.css("position")) || !t.length ? n(document) : t }, zIndex: function (i) { if (i !== t) return this.css("zIndex", i); if (this.length) { i = n(this[0]); for (var r; i.length && i[0] !== document;) { if (r = i.css("position"), (r === "absolute" || r === "relative" || r === "fixed") && (r = parseInt(i.css("zIndex"), 10), !isNaN(r) && r !== 0)) return r; i = i.parent() } } return 0 }, disableSelection: function () { return this.bind((n.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function (n) { n.preventDefault() }) }, enableSelection: function () { return this.unbind(".ui-disableSelection") } }), n.each(["Width", "Height"], function (i, r) { function u(t, i, r, u) { return n.each(o, function () { i -= parseFloat(n.curCSS(t, "padding" + this, !0)) || 0; r && (i -= parseFloat(n.curCSS(t, "border" + this + "Width", !0)) || 0); u && (i -= parseFloat(n.curCSS(t, "margin" + this, !0)) || 0) }), i } var o = r === "Width" ? ["Left", "Right"] : ["Top", "Bottom"], f = r.toLowerCase(), e = { innerWidth: n.fn.innerWidth, innerHeight: n.fn.innerHeight, outerWidth: n.fn.outerWidth, outerHeight: n.fn.outerHeight }; n.fn["inner" + r] = function (i) { return i === t ? e["inner" + r].call(this) : this.each(function () { n(this).css(f, u(this, i) + "px") }) }; n.fn["outer" + r] = function (t, i) { return typeof t != "number" ? e["outer" + r].call(this, t) : this.each(function () { n(this).css(f, u(this, t, !0, i) + "px") }) } }), n.extend(n.expr[":"], { data: function (t, i, r) { return !!n.data(t, r[3]) }, focusable: function (t) { return i(t, !isNaN(n.attr(t, "tabindex"))) }, tabbable: function (t) { var r = n.attr(t, "tabindex"), u = isNaN(r); return (u || r >= 0) && i(t, !u) } }), n(function () { var i = document.body, t = i.appendChild(t = document.createElement("div")); n.extend(t.style, { minHeight: "100px", height: "auto", padding: 0, borderWidth: 0 }); n.support.minHeight = t.offsetHeight === 100; n.support.selectstart = "onselectstart" in t; i.removeChild(t).style.display = "none" }), n.extend(n.ui, { plugin: { add: function (t, i, r) { t = n.ui[t].prototype; for (var u in r) t.plugins[u] = t.plugins[u] || [], t.plugins[u].push([i, r[u]]) }, call: function (n, t, i) { if ((t = n.plugins[t]) && n.element[0].parentNode) for (var r = 0; r < t.length; r++) n.options[t[r][0]] && t[r][1].apply(n.element, i) } }, contains: function (n, t) { return document.compareDocumentPosition ? n.compareDocumentPosition(t) & 16 : n !== t && n.contains(t) }, hasScroll: function (t, i) { if (n(t).css("overflow") === "hidden") return !1; i = i && i === "left" ? "scrollLeft" : "scrollTop"; var r = !1; return t[i] > 0 ? !0 : (t[i] = 1, r = t[i] > 0, t[i] = 0, r) }, isOverAxis: function (n, t, i) { return n > t && n < t + i }, isOver: function (t, i, r, u, f, e) { return n.ui.isOverAxis(t, r, f) && n.ui.isOverAxis(i, u, e) } })) })(jQuery), function (n, t) { var i, r; n.cleanData ? (i = n.cleanData, n.cleanData = function (t) { for (var r = 0, u; (u = t[r]) != null; r++) n(u).triggerHandler("remove"); i(t) }) : (r = n.fn.remove, n.fn.remove = function (t, i) { return this.each(function () { return i || (!t || n.filter(t, [this]).length) && n("*", this).add([this]).each(function () { n(this).triggerHandler("remove") }), r.call(n(this), t, i) }) }); n.widget = function (t, i, r) { var u = t.split(".")[0], f; t = t.split(".")[1]; f = u + "-" + t; r || (r = i, i = n.Widget); n.expr[":"][f] = function (i) { return !!n.data(i, t) }; n[u] = n[u] || {}; n[u][t] = function (n, t) { arguments.length && this._createWidget(n, t) }; i = new i; i.options = n.extend(!0, {}, i.options); n[u][t].prototype = n.extend(!0, i, { namespace: u, widgetName: t, widgetEventPrefix: n[u][t].prototype.widgetEventPrefix || t, widgetBaseClass: f }, r); n.widget.bridge(t, n[u][t]) }; n.widget.bridge = function (i, r) { n.fn[i] = function (u) { var f = typeof u == "string", e = Array.prototype.slice.call(arguments, 1), o = this; return (u = !f && e.length ? n.extend.apply(null, [!0, u].concat(e)) : u, f && u.charAt(0) === "_") ? o : (f ? this.each(function () { var r = n.data(this, i), f = r && n.isFunction(r[u]) ? r[u].apply(r, e) : r; if (f !== r && f !== t) return o = f, !1 }) : this.each(function () { var t = n.data(this, i); t ? t.option(u || {})._init() : n.data(this, i, new r(u, this)) }), o) } }; n.Widget = function (n, t) { arguments.length && this._createWidget(n, t) }; n.Widget.prototype = { widgetName: "widget", widgetEventPrefix: "", options: { disabled: !1 }, _createWidget: function (t, i) { n.data(i, this.widgetName, this); this.element = n(i); this.options = n.extend(!0, {}, this.options, this._getCreateOptions(), t); var r = this; this.element.bind("remove." + this.widgetName, function () { r.destroy() }); this._create(); this._trigger("create"); this._init() }, _getCreateOptions: function () { return n.metadata && n.metadata.get(this.element[0])[this.widgetName] }, _create: function () { }, _init: function () { }, destroy: function () { this.element.unbind("." + this.widgetName).removeData(this.widgetName); this.widget().unbind("." + this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass + "-disabled ui-state-disabled") }, widget: function () { return this.element }, option: function (i, r) { var u = i; if (arguments.length === 0) return n.extend({}, this.options); if (typeof i == "string") { if (r === t) return this.options[i]; u = {}; u[i] = r } return this._setOptions(u), this }, _setOptions: function (t) { var i = this; return n.each(t, function (n, t) { i._setOption(n, t) }), this }, _setOption: function (n, t) { return this.options[n] = t, n === "disabled" && this.widget()[t ? "addClass" : "removeClass"](this.widgetBaseClass + "-disabled ui-state-disabled").attr("aria-disabled", t), this }, enable: function () { return this._setOption("disabled", !1) }, disable: function () { return this._setOption("disabled", !0) }, _trigger: function (t, i, r) { var f = this.options[t], u; if (i = n.Event(i), i.type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(), r = r || {}, i.originalEvent) for (t = n.event.props.length; t;) u = n.event.props[--t], i[u] = i.originalEvent[u]; return this.element.trigger(i, r), !(n.isFunction(f) && f.call(this.element[0], i, r) === !1 || i.isDefaultPrevented()) } } }(jQuery), function (n) { n.widget("ui.mouse", { options: { cancel: ":input,option", distance: 1, delay: 0 }, _mouseInit: function () { var t = this; this.element.bind("mousedown." + this.widgetName, function (n) { return t._mouseDown(n) }).bind("click." + this.widgetName, function (i) { if (!0 === n.data(i.target, t.widgetName + ".preventClickEvent")) return n.removeData(i.target, t.widgetName + ".preventClickEvent"), i.stopImmediatePropagation(), !1 }); this.started = !1 }, _mouseDestroy: function () { this.element.unbind("." + this.widgetName) }, _mouseDown: function (t) { if (t.originalEvent = t.originalEvent || {}, !t.originalEvent.mouseHandled) { this._mouseStarted && this._mouseUp(t); this._mouseDownEvent = t; var i = this, r = t.which == 1, u = typeof this.options.cancel == "string" ? n(t.target).closest(this.options.cancel).length : !1; return !r || u || !this._mouseCapture(t) ? !0 : (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function () { i.mouseDelayMet = !0 }, this.options.delay)), this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = this._mouseStart(t) !== !1, !this._mouseStarted)) ? (t.preventDefault(), !0) : (!0 === n.data(t.target, this.widgetName + ".preventClickEvent") && n.removeData(t.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function (n) { return i._mouseMove(n) }, this._mouseUpDelegate = function (n) { return i._mouseUp(n) }, n(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), t.preventDefault(), t.originalEvent.mouseHandled = !0) } }, _mouseMove: function (t) { return n.browser.msie && !(document.documentMode >= 9) && !t.button ? this._mouseUp(t) : this._mouseStarted ? (this._mouseDrag(t), t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && ((this._mouseStarted = this._mouseStart(this._mouseDownEvent, t) !== !1) ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted) }, _mouseUp: function (t) { return n(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, t.target == this._mouseDownEvent.target && n.data(t.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(t)), !1 }, _mouseDistanceMet: function (n) { return Math.max(Math.abs(this._mouseDownEvent.pageX - n.pageX), Math.abs(this._mouseDownEvent.pageY - n.pageY)) >= this.options.distance }, _mouseDelayMet: function () { return this.mouseDelayMet }, _mouseStart: function () { }, _mouseDrag: function () { }, _mouseStop: function () { }, _mouseCapture: function () { return !0 } }) }(jQuery), function (n) { n.ui = n.ui || {}; var t = /left|center|right/, i = /top|center|bottom/, r = n.fn.position, u = n.fn.offset; n.fn.position = function (u) { if (!u || !u.of) return r.apply(this, arguments); u = n.extend({}, u); var e = n(u.of), l = e[0], c = (u.collision || "flip").split(" "), o = u.offset ? u.offset.split(" ") : [0, 0], s, h, f; return l.nodeType === 9 ? (s = e.width(), h = e.height(), f = { top: 0, left: 0 }) : l.setTimeout ? (s = e.width(), h = e.height(), f = { top: e.scrollTop(), left: e.scrollLeft() }) : l.preventDefault ? (u.at = "left top", s = h = 0, f = { top: u.of.pageY, left: u.of.pageX }) : (s = e.outerWidth(), h = e.outerHeight(), f = e.offset()), n.each(["my", "at"], function () { var n = (u[this] || "").split(" "); n.length === 1 && (n = t.test(n[0]) ? n.concat(["center"]) : i.test(n[0]) ? ["center"].concat(n) : ["center", "center"]); n[0] = t.test(n[0]) ? n[0] : "center"; n[1] = i.test(n[1]) ? n[1] : "center"; u[this] = n }), c.length === 1 && (c[1] = c[0]), o[0] = parseInt(o[0], 10) || 0, o.length === 1 && (o[1] = o[0]), o[1] = parseInt(o[1], 10) || 0, u.at[0] === "right" ? f.left += s : u.at[0] === "center" && (f.left += s / 2), u.at[1] === "bottom" ? f.top += h : u.at[1] === "center" && (f.top += h / 2), f.left += o[0], f.top += o[1], this.each(function () { var i = n(this), r = i.outerWidth(), e = i.outerHeight(), l = parseInt(n.curCSS(this, "marginLeft", !0)) || 0, a = parseInt(n.curCSS(this, "marginTop", !0)) || 0, y = r + l + (parseInt(n.curCSS(this, "marginRight", !0)) || 0), p = e + a + (parseInt(n.curCSS(this, "marginBottom", !0)) || 0), t = n.extend({}, f), v; u.my[0] === "right" ? t.left -= r : u.my[0] === "center" && (t.left -= r / 2); u.my[1] === "bottom" ? t.top -= e : u.my[1] === "center" && (t.top -= e / 2); t.left = Math.round(t.left); t.top = Math.round(t.top); v = { left: t.left - l, top: t.top - a }; n.each(["left", "top"], function (i, f) { n.ui.position[c[i]] && n.ui.position[c[i]][f](t, { targetWidth: s, targetHeight: h, elemWidth: r, elemHeight: e, collisionPosition: v, collisionWidth: y, collisionHeight: p, offset: o, my: u.my, at: u.at }) }); n.fn.bgiframe && i.bgiframe(); i.offset(n.extend(t, { using: u.using })) }) }; n.ui.position = { fit: { left: function (t, i) { var r = n(window); r = i.collisionPosition.left + i.collisionWidth - r.width() - r.scrollLeft(); t.left = r > 0 ? t.left - r : Math.max(t.left - i.collisionPosition.left, t.left) }, top: function (t, i) { var r = n(window); r = i.collisionPosition.top + i.collisionHeight - r.height() - r.scrollTop(); t.top = r > 0 ? t.top - r : Math.max(t.top - i.collisionPosition.top, t.top) } }, flip: { left: function (t, i) { var r; if (i.at[0] !== "center") { r = n(window); r = i.collisionPosition.left + i.collisionWidth - r.width() - r.scrollLeft(); var u = i.my[0] === "left" ? -i.elemWidth : i.my[0] === "right" ? i.elemWidth : 0, f = i.at[0] === "left" ? i.targetWidth : -i.targetWidth, e = -2 * i.offset[0]; t.left += i.collisionPosition.left < 0 ? u + f + e : r > 0 ? u + f + e : 0 } }, top: function (t, i) { var r; if (i.at[1] !== "center") { r = n(window); r = i.collisionPosition.top + i.collisionHeight - r.height() - r.scrollTop(); var u = i.my[1] === "top" ? -i.elemHeight : i.my[1] === "bottom" ? i.elemHeight : 0, f = i.at[1] === "top" ? i.targetHeight : -i.targetHeight, e = -2 * i.offset[1]; t.top += i.collisionPosition.top < 0 ? u + f + e : r > 0 ? u + f + e : 0 } } } }; n.offset.setOffset || (n.offset.setOffset = function (t, i) { /static/.test(n.curCSS(t, "position")) && (t.style.position = "relative"); var u = n(t), r = u.offset(), f = parseInt(n.curCSS(t, "top", !0), 10) || 0, e = parseInt(n.curCSS(t, "left", !0), 10) || 0; r = { top: i.top - r.top + f, left: i.left - r.left + e }; "using" in i ? i.using.call(t, r) : u.css(r) }, n.fn.offset = function (t) { var i = this[0]; return !i || !i.ownerDocument ? null : t ? this.each(function () { n.offset.setOffset(this, t) }) : u.call(this) }) }(jQuery), function (n) { var t = 0; n.widget("ui.autocomplete", { options: { appendTo: "body", autoFocus: !1, delay: 300, minLength: 1, position: { my: "left top", at: "left bottom", collision: "none" }, source: null }, pending: 0, _create: function () { var t = this, r = this.element[0].ownerDocument, i; this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off").attr({ role: "textbox", "aria-autocomplete": "list", "aria-haspopup": "true" }).bind("keydown.autocomplete", function (r) { if (!(t.options.disabled || t.element.propAttr("readOnly"))) { i = !1; var u = n.ui.keyCode; switch (r.keyCode) { case u.PAGE_UP: t._move("previousPage", r); break; case u.PAGE_DOWN: t._move("nextPage", r); break; case u.UP: t._move("previous", r); r.preventDefault(); break; case u.DOWN: t._move("next", r); r.preventDefault(); break; case u.ENTER: case u.NUMPAD_ENTER: t.menu.active && (i = !0, r.preventDefault()); case u.TAB: if (!t.menu.active) return; t.menu.select(r); break; case u.ESCAPE: t.element.val(t.term); t.close(r); break; default: clearTimeout(t.searching); t.searching = setTimeout(function () { t.term != t.element.val() && (t.selectedItem = null, t.search(null, r)) }, t.options.delay) } } }).bind("keypress.autocomplete", function (n) { i && (i = !1, n.preventDefault()) }).bind("focus.autocomplete", function () { t.options.disabled || (t.selectedItem = null, t.previous = t.element.val()) }).bind("blur.autocomplete", function (n) { t.options.disabled || (clearTimeout(t.searching), t.closing = setTimeout(function () { t.close(n); t._change(n) }, 150)) }); this._initSource(); this.response = function () { return t._response.apply(t, arguments) }; this.menu = n("<ul><\/ul>").addClass("ui-autocomplete").appendTo(n(this.options.appendTo || "body", r)[0]).mousedown(function (i) { var r = t.menu.element[0]; n(i.target).closest(".ui-menu-item").length || setTimeout(function () { n(document).one("mousedown", function (i) { i.target === t.element[0] || i.target === r || n.ui.contains(r, i.target) || t.close() }) }, 1); setTimeout(function () { clearTimeout(t.closing) }, 13) }).menu({ focus: function (n, i) { i = i.item.data("item.autocomplete"); !1 !== t._trigger("focus", n, { item: i }) && /^key/.test(n.originalEvent.type) && t.element.val(i.value) }, selected: function (n, i) { var u = i.item.data("item.autocomplete"), f = t.previous; t.element[0] !== r.activeElement && (t.element.focus(), t.previous = f, setTimeout(function () { t.previous = f; t.selectedItem = u }, 1)); !1 !== t._trigger("select", n, { item: u }) && t.element.val(u.value); t.term = t.element.val(); t.close(n); t.selectedItem = u }, blur: function () { t.menu.element.is(":visible") && t.element.val() !== t.term && t.element.val(t.term) } }).zIndex(this.element.zIndex() + 100).css({ top: 0, left: 0 }).hide().data("menu"); n.fn.bgiframe && this.menu.element.bgiframe() }, destroy: function () { this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"); this.menu.element.remove(); n.Widget.prototype.destroy.call(this) }, _setOption: function (t, i) { n.Widget.prototype._setOption.apply(this, arguments); t === "source" && this._initSource(); t === "appendTo" && this.menu.element.appendTo(n(i || "body", this.element[0].ownerDocument)[0]); t === "disabled" && i && this.xhr && this.xhr.abort() }, _initSource: function () { var i = this, r, u; n.isArray(this.options.source) ? (r = this.options.source, this.source = function (t, i) { i(n.ui.autocomplete.filter(r, t.term)) }) : typeof this.options.source == "string" ? (u = this.options.source, this.source = function (r, f) { i.xhr && i.xhr.abort(); i.xhr = n.ajax({ url: u, data: r, dataType: "json", autocompleteRequest: ++t, success: function (n) { this.autocompleteRequest === t && f(n) }, error: function () { this.autocompleteRequest === t && f([]) } }) }) : this.source = this.options.source }, search: function (n, t) { return (n = n != null ? n : this.element.val(), this.term = this.element.val(), n.length < this.options.minLength) ? this.close(t) : (clearTimeout(this.closing), this._trigger("search", t) !== !1 ? this._search(n) : void 0) }, _search: function (n) { this.pending++; this.element.addClass("ui-autocomplete-loading"); this.source({ term: n }, this.response) }, _response: function (n) { !this.options.disabled && n && n.length ? (n = this._normalize(n), this._suggest(n), this._trigger("open")) : this.close(); this.pending--; this.pending || this.element.removeClass("ui-autocomplete-loading") }, close: function (n) { clearTimeout(this.closing); this.menu.element.is(":visible") && (this.menu.element.hide(), this.menu.deactivate(), this._trigger("close", n)) }, _change: function (n) { this.previous !== this.element.val() && this._trigger("change", n, { item: this.selectedItem }) }, _normalize: function (t) { return t.length && t[0].label && t[0].value ? t : n.map(t, function (t) { return typeof t == "string" ? { label: t, value: t } : n.extend({ label: t.label || t.value, value: t.value || t.label }, t) }) }, _suggest: function (t) { var i = this.menu.element.empty().zIndex(this.element.zIndex() + 100); this._renderMenu(i, t); this.menu.deactivate(); this.menu.refresh(); i.show(); this._resizeMenu(); i.position(n.extend({ of: this.element }, this.options.position)); this.options.autoFocus && this.menu.next(new n.Event("mouseover")) }, _resizeMenu: function () { var n = this.menu.element; n.outerWidth(Math.max(n.width("").outerWidth(), this.element.outerWidth())) }, _renderMenu: function (t, i) { var r = this; n.each(i, function (n, i) { r._renderItem(t, i) }) }, _renderItem: function (t, i) { return n("<li><\/li>").data("item.autocomplete", i).append(n("<a><\/a>").text(i.label)).appendTo(t) }, _move: function (n, t) { this.menu.element.is(":visible") ? this.menu.first() && /^previous/.test(n) || this.menu.last() && /^next/.test(n) ? (this.element.val(this.term), this.menu.deactivate()) : this.menu[n](t) : this.search(null, t) }, widget: function () { return this.menu.element } }); n.extend(n.ui.autocomplete, { escapeRegex: function (n) { return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&") }, filter: function (t, i) { var r = new RegExp(n.ui.autocomplete.escapeRegex(i), "i"); return n.grep(t, function (n) { return r.test(n.label || n.value || n) }) } }) }(jQuery), function (n) { n.widget("ui.menu", { _create: function () { var t = this; this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({ role: "listbox", "aria-activedescendant": "ui-active-menuitem" }).click(function (i) { n(i.target).closest(".ui-menu-item a").length && (i.preventDefault(), t.select(i)) }); this.refresh() }, refresh: function () { var t = this; this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role", "menuitem").children("a").addClass("ui-corner-all").attr("tabindex", -1).mouseenter(function (i) { t.activate(i, n(this).parent()) }).mouseleave(function () { t.deactivate() }) }, activate: function (n, t) { if (this.deactivate(), this.hasScroll()) { var i = t.offset().top - this.element.offset().top, r = this.element.scrollTop(), u = this.element.height(); i < 0 ? this.element.scrollTop(r + i) : i >= u && this.element.scrollTop(r + i - u + t.height()) } this.active = t.eq(0).children("a").addClass("ui-state-hover").attr("id", "ui-active-menuitem").end(); this._trigger("focus", n, { item: t }) }, deactivate: function () { this.active && (this.active.children("a").removeClass("ui-state-hover").removeAttr("id"), this._trigger("blur"), this.active = null) }, next: function (n) { this.move("next", ".ui-menu-item:first", n) }, previous: function (n) { this.move("prev", ".ui-menu-item:last", n) }, first: function () { return this.active && !this.active.prevAll(".ui-menu-item").length }, last: function () { return this.active && !this.active.nextAll(".ui-menu-item").length }, move: function (n, t, i) { this.active ? (n = this.active[n + "All"](".ui-menu-item").eq(0), n.length ? this.activate(i, n) : this.activate(i, this.element.children(t))) : this.activate(i, this.element.children(t)) }, nextPage: function (t) { if (this.hasScroll()) if (!this.active || this.last()) this.activate(t, this.element.children(".ui-menu-item:first")); else { var r = this.active.offset().top, u = this.element.height(), i = this.element.children(".ui-menu-item").filter(function () { var t = n(this).offset().top - r - u + n(this).height(); return t < 10 && t > -10 }); i.length || (i = this.element.children(".ui-menu-item:last")); this.activate(t, i) } else this.activate(t, this.element.children(".ui-menu-item").filter(!this.active || this.last() ? ":first" : ":last")) }, previousPage: function (t) { if (this.hasScroll()) if (!this.active || this.first()) this.activate(t, this.element.children(".ui-menu-item:last")); else { var i = this.active.offset().top, r = this.element.height(); result = this.element.children(".ui-menu-item").filter(function () { var t = n(this).offset().top - i + r - n(this).height(); return t < 10 && t > -10 }); result.length || (result = this.element.children(".ui-menu-item:first")); this.activate(t, result) } else this.activate(t, this.element.children(".ui-menu-item").filter(!this.active || this.first() ? ":last" : ":first")) }, hasScroll: function () { return this.element.height() < this.element[n.fn.prop ? "prop" : "attr"]("scrollHeight") }, select: function (n) { this._trigger("selected", n, { item: this.active }) } }) }(jQuery), function (n) { n.extend(n.fn, { validate: function (t) { if (!this.length) { t && t.debug && window.console && console.warn("Nothing selected, can't validate, returning nothing."); return } var i = n.data(this[0], "validator"); return i ? i : (this.attr("novalidate", "novalidate"), i = new n.validator(t, this[0]), n.data(this[0], "validator", i), i.settings.onsubmit && (this.validateDelegate(":submit", "click", function (t) { i.settings.submitHandler && (i.submitButton = t.target); n(t.target).hasClass("cancel") && (i.cancelSubmit = !0) }), this.submit(function (t) { function r() { var r; return i.settings.submitHandler ? (i.submitButton && (r = n("<input type='hidden'/>").attr("name", i.submitButton.name).val(i.submitButton.value).appendTo(i.currentForm)), i.settings.submitHandler.call(i, i.currentForm, t), i.submitButton && r.remove(), !1) : !0 } return (i.settings.debug && t.preventDefault(), i.cancelSubmit) ? (i.cancelSubmit = !1, r()) : i.form() ? i.pendingRequest ? (i.formSubmitted = !0, !1) : r() : (i.focusInvalid(), !1) })), i) }, valid: function () { if (n(this[0]).is("form")) return this.validate().form(); var t = !0, i = n(this[0].form).validate(); return this.each(function () { t &= i.element(this) }), t }, removeAttrs: function (t) { var i = {}, r = this; return n.each(t.split(/\s/), function (n, t) { i[t] = r.attr(t); r.removeAttr(t) }), i }, rules: function (t, i) { var r = this[0], o, u, h; if (t) { var e = n.data(r.form, "validator").settings, s = e.rules, f = n.validator.staticRules(r); switch (t) { case "add": n.extend(f, n.validator.normalizeRule(i)); s[r.name] = f; i.messages && (e.messages[r.name] = n.extend(e.messages[r.name], i.messages)); break; case "remove": return i ? (o = {}, n.each(i.split(/\s/), function (n, t) { o[t] = f[t]; delete f[t] }), o) : (delete s[r.name], f) } } return u = n.validator.normalizeRules(n.extend({}, n.validator.classRules(r), n.validator.attributeRules(r), n.validator.dataRules(r), n.validator.staticRules(r)), r), u.required && (h = u.required, delete u.required, u = n.extend({ required: h }, u)), u } }); n.extend(n.expr[":"], { blank: function (t) { return !n.trim("" + t.value) }, filled: function (t) { return !!n.trim("" + t.value) }, unchecked: function (n) { return !n.checked } }); n.validator = function (t, i) { this.settings = n.extend(!0, {}, n.validator.defaults, t); this.currentForm = i; this.init() }; n.validator.format = function (t, i) { return arguments.length === 1 ? function () { var i = n.makeArray(arguments); return i.unshift(t), n.validator.format.apply(this, i) } : (arguments.length > 2 && i.constructor !== Array && (i = n.makeArray(arguments).slice(1)), i.constructor !== Array && (i = [i]), n.each(i, function (n, i) { t = t.replace(new RegExp("\\{" + n + "\\}", "g"), function () { return i }) }), t) }; n.extend(n.validator, { defaults: { messages: {}, groups: {}, rules: {}, errorClass: "invalid", validClass: "valid", errorElement: "em", focusInvalid: !0, errorContainer: n([]), errorLabelContainer: n([]), onsubmit: !0, ignore: ":hidden", ignoreTitle: !1, onfocusin: function (n) { this.lastActive = n; this.settings.focusCleanup && !this.blockFocusCleanup && (this.settings.unhighlight && this.settings.unhighlight.call(this, n, this.settings.errorClass, this.settings.validClass), this.addWrapper(this.errorsFor(n)).hide()) }, onfocusout: function (n) { !this.checkable(n) && (n.name in this.submitted || !this.optional(n)) && this.element(n) }, onkeyup: function (n, t) { (t.which !== 9 || this.elementValue(n) !== "") && (n.name in this.submitted || n === this.lastElement) && this.element(n) }, onclick: function (n) { n.name in this.submitted ? this.element(n) : n.parentNode.name in this.submitted && this.element(n.parentNode) }, highlight: function (t, i, r) { t.type === "radio" ? this.findByName(t.name).addClass(i).removeClass(r).parent().addClass("state-error").removeClass("state-success") : n(t).addClass(i).removeClass(r).parent().addClass("state-error").removeClass("state-success") }, unhighlight: function (t, i, r) { t.type === "radio" ? this.findByName(t.name).removeClass(i).addClass(r).parent().addClass("state-success").removeClass("state-error") : n(t).removeClass(i).addClass(r).parent().addClass("state-success").removeClass("state-error") } }, setDefaults: function (t) { n.extend(n.validator.defaults, t) }, messages: { required: "This field is required", remote: "Please fix this field", email: "Please enter a valid email address", url: "Please enter a valid URL", date: "Please enter a valid date", dateISO: "Please enter a valid date (ISO)", number: "Please enter a valid number", digits: "Please enter only digits", creditcard: "Please enter a valid credit card number", equalTo: "Please enter the same value again", maxlength: n.validator.format("Please enter no more than {0} characters"), minlength: n.validator.format("Please enter at least {0} characters"), rangelength: n.validator.format("Please enter a value between {0} and {1} characters long"), range: n.validator.format("Please enter a value between {0} and {1}"), max: n.validator.format("Please enter a value less than or equal to {0}"), min: n.validator.format("Please enter a value greater than or equal to {0}") }, autoCreateRanges: !1, prototype: { init: function () { function r(t) { var i = n.data(this[0].form, "validator"), r = "on" + t.type.replace(/^validate/, ""); i.settings[r] && i.settings[r].call(i, this[0], t) } var i, t; this.labelContainer = n(this.settings.errorLabelContainer); this.errorContext = this.labelContainer.length && this.labelContainer || n(this.currentForm); this.containers = n(this.settings.errorContainer).add(this.settings.errorLabelContainer); this.submitted = {}; this.valueCache = {}; this.pendingRequest = 0; this.pending = {}; this.invalid = {}; this.reset(); i = this.groups = {}; n.each(this.settings.groups, function (t, r) { typeof r == "string" && (r = r.split(/\s/)); n.each(r, function (n, r) { i[r] = t }) }); t = this.settings.rules; n.each(t, function (i, r) { t[i] = n.validator.normalizeRule(r) }); n(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ", "focusin focusout keyup", r).validateDelegate("[type='radio'], [type='checkbox'], select, option", "click", r); this.settings.invalidHandler && n(this.currentForm).bind("invalid-form.validate", this.settings.invalidHandler) }, form: function () { return this.checkForm(), n.extend(this.submitted, this.errorMap), this.invalid = n.extend({}, this.errorMap), this.valid() || n(this.currentForm).triggerHandler("invalid-form", [this]), this.showErrors(), this.valid() }, checkForm: function () { this.prepareForm(); for (var n = 0, t = this.currentElements = this.elements() ; t[n]; n++) this.check(t[n]); return this.valid() }, element: function (t) { t = this.validationTargetFor(this.clean(t)); this.lastElement = t; this.prepareElement(t); this.currentElements = n(t); var i = this.check(t) !== !1; return i ? delete this.invalid[t.name] : this.invalid[t.name] = !0, this.numberOfInvalids() || (this.toHide = this.toHide.add(this.containers)), this.showErrors(), i }, showErrors: function (t) { if (t) { n.extend(this.errorMap, t); this.errorList = []; for (var i in t) this.errorList.push({ message: t[i], element: this.findByName(i)[0] }); this.successList = n.grep(this.successList, function (n) { return !(n.name in t) }) } this.settings.showErrors ? this.settings.showErrors.call(this, this.errorMap, this.errorList) : this.defaultShowErrors() }, resetForm: function () { n.fn.resetForm && n(this.currentForm).resetForm(); this.submitted = {}; this.lastElement = null; this.prepareForm(); this.hideErrors(); this.elements().removeClass(this.settings.errorClass).removeData("previousValue") }, numberOfInvalids: function () { return this.objectLength(this.invalid) }, objectLength: function (n) { var t = 0; for (var i in n) t++; return t }, hideErrors: function () { this.addWrapper(this.toHide).hide() }, valid: function () { return this.size() === 0 }, size: function () { return this.errorList.length }, focusInvalid: function () { if (this.settings.focusInvalid) try { n(this.findLastActive() || this.errorList.length && this.errorList[0].element || []).filter(":visible").focus().trigger("focusin") } catch (t) { } }, findLastActive: function () { var t = this.lastActive; return t && n.grep(this.errorList, function (n) { return n.element.name === t.name }).length === 1 && t }, elements: function () { var t = this, i = {}; return n(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function () { return (!this.name && t.settings.debug && window.console && console.error("%o has no name assigned", this), this.name in i || !t.objectLength(n(this).rules())) ? !1 : (i[this.name] = !0, !0) }) }, clean: function (t) { return n(t)[0] }, errors: function () { var t = this.settings.errorClass.replace(" ", "."); return n(this.settings.errorElement + "." + t, this.errorContext) }, reset: function () { this.successList = []; this.errorList = []; this.errorMap = {}; this.toShow = n([]); this.toHide = n([]); this.currentElements = n([]) }, prepareForm: function () { this.reset(); this.toHide = this.errors().add(this.containers) }, prepareElement: function (n) { this.reset(); this.toHide = this.errorsFor(n) }, elementValue: function (t) { var r = n(t).attr("type"), i = n(t).val(); return r === "radio" || r === "checkbox" ? n("input[name='" + n(t).attr("name") + "']:checked").val() : typeof i == "string" ? i.replace(/\r/g, "") : i }, check: function (t) { var r, u; t = this.validationTargetFor(this.clean(t)); var f = n(t).rules(), e = !1, s = this.elementValue(t), i; for (r in f) { u = { method: r, parameters: f[r] }; try { if (i = n.validator.methods[r].call(this, s, t, u.parameters), i === "dependency-mismatch") { e = !0; continue } if (e = !1, i === "pending") { this.toHide = this.toHide.not(this.errorsFor(t)); return } if (!i) return this.formatAndAdd(t, u), !1 } catch (o) { this.settings.debug && window.console && console.log("Exception occured when checking element " + t.id + ", check the '" + u.method + "' method.", o); throw o; } } if (!e) return this.objectLength(f) && this.successList.push(t), !0 }, customDataMessage: function (t, i) { return n(t).data("msg-" + i.toLowerCase()) || t.attributes && n(t).attr("data-msg-" + i.toLowerCase()) }, customMessage: function (n, t) { var i = this.settings.messages[n]; return i && (i.constructor === String ? i : i[t]) }, findDefined: function () { for (var n = 0; n < arguments.length; n++) if (arguments[n] !== undefined) return arguments[n]; return undefined }, defaultMessage: function (t, i) { return this.findDefined(this.customMessage(t.name, i), this.customDataMessage(t, i), !this.settings.ignoreTitle && t.title || undefined, n.validator.messages[i], "<strong>Warning: No message defined for " + t.name + "<\/strong>") }, formatAndAdd: function (t, i) { var r = this.defaultMessage(t, i.method), u = /\$?\{(\d+)\}/g; typeof r == "function" ? r = r.call(this, i.parameters, t) : u.test(r) && (r = n.validator.format(r.replace(u, "{$1}"), i.parameters)); this.errorList.push({ message: r, element: t }); this.errorMap[t.name] = r; this.submitted[t.name] = r }, addWrapper: function (n) { return this.settings.wrapper && (n = n.add(n.parent(this.settings.wrapper))), n }, defaultShowErrors: function () { for (var i, t, n = 0; this.errorList[n]; n++) t = this.errorList[n], this.settings.highlight && this.settings.highlight.call(this, t.element, this.settings.errorClass, this.settings.validClass), this.showLabel(t.element, t.message); if (this.errorList.length && (this.toShow = this.toShow.add(this.containers)), this.settings.success) for (n = 0; this.successList[n]; n++) this.showLabel(this.successList[n]); if (this.settings.unhighlight) for (n = 0, i = this.validElements() ; i[n]; n++) this.settings.unhighlight.call(this, i[n], this.settings.errorClass, this.settings.validClass); this.toHide = this.toHide.not(this.toShow); this.hideErrors(); this.addWrapper(this.toShow).show() }, validElements: function () { return this.currentElements.not(this.invalidElements()) }, invalidElements: function () { return n(this.errorList).map(function () { return this.element }) }, showLabel: function (t, i) { var r = this.errorsFor(t); r.length ? (r.removeClass(this.settings.validClass).addClass(this.settings.errorClass), r.html(i)) : (r = n("<" + this.settings.errorElement + ">").attr("for", this.idOrName(t)).addClass(this.settings.errorClass).html(i || ""), this.settings.wrapper && (r = r.hide().show().wrap("<" + this.settings.wrapper + "/>").parent()), this.labelContainer.append(r).length || (this.settings.errorPlacement ? this.settings.errorPlacement(r, n(t)) : r.insertAfter(t))); !i && this.settings.success && (r.text(""), typeof this.settings.success == "string" ? r.addClass(this.settings.success) : this.settings.success(r, t)); this.toShow = this.toShow.add(r) }, errorsFor: function (t) { var i = this.idOrName(t); return this.errors().filter(function () { return n(this).attr("for") === i }) }, idOrName: function (n) { return this.groups[n.name] || (this.checkable(n) ? n.name : n.id || n.name) }, validationTargetFor: function (n) { return this.checkable(n) && (n = this.findByName(n.name).not(this.settings.ignore)[0]), n }, checkable: function (n) { return /radio|checkbox/i.test(n.type) }, findByName: function (t) { return n(this.currentForm).find("[name='" + t + "']") }, getLength: function (t, i) { switch (i.nodeName.toLowerCase()) { case "select": return n("option:selected", i).length; case "input": if (this.checkable(i)) return this.findByName(i.name).filter(":checked").length } return t.length }, depend: function (n, t) { return this.dependTypes[typeof n] ? this.dependTypes[typeof n](n, t) : !0 }, dependTypes: { boolean: function (n) { return n }, string: function (t, i) { return !!n(t, i.form).length }, "function": function (n, t) { return n(t) } }, optional: function (t) { var i = this.elementValue(t); return !n.validator.methods.required.call(this, i, t) && "dependency-mismatch" }, startRequest: function (n) { this.pending[n.name] || (this.pendingRequest++, this.pending[n.name] = !0) }, stopRequest: function (t, i) { this.pendingRequest--; this.pendingRequest < 0 && (this.pendingRequest = 0); delete this.pending[t.name]; i && this.pendingRequest === 0 && this.formSubmitted && this.form() ? (n(this.currentForm).submit(), this.formSubmitted = !1) : !i && this.pendingRequest === 0 && this.formSubmitted && (n(this.currentForm).triggerHandler("invalid-form", [this]), this.formSubmitted = !1) }, previousValue: function (t) { return n.data(t, "previousValue") || n.data(t, "previousValue", { old: null, valid: !0, message: this.defaultMessage(t, "remote") }) } }, classRuleSettings: { required: { required: !0 }, email: { email: !0 }, url: { url: !0 }, date: { date: !0 }, dateISO: { dateISO: !0 }, number: { number: !0 }, digits: { digits: !0 }, creditcard: { creditcard: !0 } }, addClassRules: function (t, i) { t.constructor === String ? this.classRuleSettings[t] = i : n.extend(this.classRuleSettings, t) }, classRules: function (t) { var i = {}, r = n(t).attr("class"); return r && n.each(r.split(" "), function () { this in n.validator.classRuleSettings && n.extend(i, n.validator.classRuleSettings[this]) }), i }, attributeRules: function (t) { var u = {}, f = n(t), r, i; for (r in n.validator.methods) r === "required" ? (i = f.get(0).getAttribute(r), i === "" && (i = !0), i = !!i) : i = f.attr(r), i ? u[r] = i : f[0].getAttribute("type") === r && (u[r] = !0); return u.maxlength && /-1|2147483647|524288/.test(u.maxlength) && delete u.maxlength, u }, dataRules: function (t) { var i, r, u = {}, f = n(t); for (i in n.validator.methods) r = f.data("rule-" + i.toLowerCase()), r !== undefined && (u[i] = r); return u }, staticRules: function (t) { var i = {}, r = n.data(t.form, "validator"); return r.settings.rules && (i = n.validator.normalizeRule(r.settings.rules[t.name]) || {}), i }, normalizeRules: function (t, i) { return n.each(t, function (r, u) { if (u === !1) { delete t[r]; return } if (u.param || u.depends) { var f = !0; switch (typeof u.depends) { case "string": f = !!n(u.depends, i.form).length; break; case "function": f = u.depends.call(i, i) } f ? t[r] = u.param !== undefined ? u.param : !0 : delete t[r] } }), n.each(t, function (r, u) { t[r] = n.isFunction(u) ? u(i) : u }), n.each(["minlength", "maxlength"], function () { t[this] && (t[this] = Number(t[this])) }), n.each(["rangelength"], function () { var i; t[this] && (n.isArray(t[this]) ? t[this] = [Number(t[this][0]), Number(t[this][1])] : typeof t[this] == "string" && (i = t[this].split(/[\s,]+/), t[this] = [Number(i[0]), Number(i[1])])) }), n.validator.autoCreateRanges && (t.min && t.max && (t.range = [t.min, t.max], delete t.min, delete t.max), t.minlength && t.maxlength && (t.rangelength = [t.minlength, t.maxlength], delete t.minlength, delete t.maxlength)), t }, normalizeRule: function (t) { if (typeof t == "string") { var i = {}; n.each(t.split(/\s/), function () { i[this] = !0 }); t = i } return t }, addMethod: function (t, i, r) { n.validator.methods[t] = i; n.validator.messages[t] = r !== undefined ? r : n.validator.messages[t]; i.length < 3 && n.validator.addClassRules(t, n.validator.normalizeRule(t)) }, methods: { required: function (t, i, r) { if (!this.depend(r, i)) return "dependency-mismatch"; if (i.nodeName.toLowerCase() === "select") { var u = n(i).val(); return u && u.length > 0 } return this.checkable(i) ? this.getLength(t, i) > 0 : n.trim(t).length > 0 }, remote: function (t, i, r) { var f, u, e; return this.optional(i) ? "dependency-mismatch" : (f = this.previousValue(i), this.settings.messages[i.name] || (this.settings.messages[i.name] = {}), f.originalMessage = this.settings.messages[i.name].remote, this.settings.messages[i.name].remote = f.message, r = typeof r == "string" && { url: r } || r, f.old === t) ? f.valid : (f.old = t, u = this, this.startRequest(i), e = {}, e[i.name] = t, n.ajax(n.extend(!0, { url: r, mode: "abort", port: "validate" + i.name, dataType: "json", data: e, success: function (r) { var e, h, s, o; u.settings.messages[i.name].remote = f.originalMessage; e = r === !0 || r === "true"; e ? (h = u.formSubmitted, u.prepareElement(i), u.formSubmitted = h, u.successList.push(i), delete u.invalid[i.name], u.showErrors()) : (s = {}, o = r || u.defaultMessage(i, "remote"), s[i.name] = f.message = n.isFunction(o) ? o(t) : o, u.invalid[i.name] = !0, u.showErrors(s)); f.valid = e; u.stopRequest(i, e) } }, r)), "pending") }, minlength: function (t, i, r) { var u = n.isArray(t) ? t.length : this.getLength(n.trim(t), i); return this.optional(i) || u >= r }, maxlength: function (t, i, r) { var u = n.isArray(t) ? t.length : this.getLength(n.trim(t), i); return this.optional(i) || u <= r }, rangelength: function (t, i, r) { var u = n.isArray(t) ? t.length : this.getLength(n.trim(t), i); return this.optional(i) || u >= r[0] && u <= r[1] }, min: function (n, t, i) { return this.optional(t) || n >= i }, max: function (n, t, i) { return this.optional(t) || n <= i }, range: function (n, t, i) { return this.optional(t) || n >= i[0] && n <= i[1] }, email: function (n, t) { return this.optional(t) || /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(n) }, url: function (n, t) { return this.optional(t) || /^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(n) }, date: function (n, t) { return this.optional(t) || !/Invalid|NaN/.test(new Date(n).toString()) }, dateISO: function (n, t) { return this.optional(t) || /^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(n) }, number: function (n, t) { return this.optional(t) || /^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(n) }, digits: function (n, t) { return this.optional(t) || /^\d+$/.test(n) }, creditcard: function (n, t) { var r, e; if (this.optional(t)) return "dependency-mismatch"; if (/[^0-9 \-]+/.test(n)) return !1; var f = 0, i = 0, u = !1; for (n = n.replace(/\D/g, ""), r = n.length - 1; r >= 0; r--) e = n.charAt(r), i = parseInt(e, 10), u && (i *= 2) > 9 && (i -= 9), f += i, u = !u; return f % 10 == 0 }, equalTo: function (t, i, r) { var u = n(r); return this.settings.onfocusout && u.unbind(".validate-equalTo").bind("blur.validate-equalTo", function () { n(i).valid() }), t === u.val() } } }); n.format = n.validator.format }(jQuery), function (n) { var t = {}, i; n.ajaxPrefilter ? n.ajaxPrefilter(function (n, i, r) { var u = n.port; n.mode === "abort" && (t[u] && t[u].abort(), t[u] = r) }) : (i = n.ajax, n.ajax = function (r) { var f = ("mode" in r ? r : n.ajaxSettings).mode, u = ("port" in r ? r : n.ajaxSettings).port; return f === "abort" ? (t[u] && t[u].abort(), t[u] = i.apply(this, arguments)) : i.apply(this, arguments) }) }(jQuery), function (n) { n.extend(n.fn, { validateDelegate: function (t, i, r) { return this.bind(i, function (i) { var u = n(i.target); if (u.is(t)) return r.apply(u, arguments) }) } }) }(jQuery), function (n) { var s, p, w, r, tt, e, it, h, d, g, a = 0, i = {}, c = [], l = 0, t = {}, o = [], ut = null, b = new Image, et = /\.(jpg|gif|png|bmp|jpeg)(.*)?$/i, bt = /[^\.]\.(swf)\s*$/i, ot, st = 1, k = 0, y = "", v, f, u = !1, nt = n.extend(n("<div/>")[0], { prop: 0 }), ht = n.browser.msie && n.browser.version < 7 && !window.XMLHttpRequest, ct = function () { p.hide(); b.onerror = b.onload = null; ut && ut.abort(); s.empty() }, lt = function () { !1 === i.onError(c, a, i) ? (p.hide(), u = !1) : (i.titleShow = !1, i.width = "auto", i.height = "auto", s.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.<\/p>'), rt()) }, ft = function () { var t = c[a], r, o, h, l, v, f; if (ct(), i = n.extend({}, n.fn.fancybox.defaults, typeof n(t).data("fancybox") == "undefined" ? i : n(t).data("fancybox")), f = i.onStart(c, a, i), f === !1) u = !1; else if (typeof f == "object" && (i = n.extend(i, f)), h = i.title || (t.nodeName ? n(t).attr("title") : t.title) || "", t.nodeName && !i.orig && (i.orig = n(t).children("img:first").length ? n(t).children("img:first") : n(t)), h === "" && i.orig && i.titleFromAlt && (h = i.orig.attr("alt")), r = i.href || (t.nodeName ? n(t).attr("href") : t.href) || null, (/^(?:javascript)/i.test(r) || r == "#") && (r = null), i.type ? (o = i.type, r || (r = i.content)) : i.content ? o = "html" : r && (o = r.match(et) ? "image" : r.match(bt) ? "swf" : n(t).hasClass("iframe") ? "iframe" : r.indexOf("#") === 0 ? "inline" : "ajax"), o) { o == "inline" && (t = r.substr(r.indexOf("#")), o = n(t).length > 0 ? "inline" : "ajax"); i.type = o; i.href = r; i.title = h; i.autoDimensions && (i.type == "html" || i.type == "inline" || i.type == "ajax" ? (i.width = "auto", i.height = "auto") : i.autoDimensions = !1); i.modal && (i.overlayShow = !0, i.hideOnOverlayClick = !1, i.hideOnContentClick = !1, i.enableEscapeButton = !1, i.showCloseButton = !1); i.padding = parseInt(i.padding, 10); i.margin = parseInt(i.margin, 10); s.css("padding", i.padding + i.margin); n(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change", function () { n(this).replaceWith(e.children()) }); switch (o) { case "html": s.html(i.content); rt(); break; case "inline": if (n(t).parent().is("#fancybox-content") === !0) { u = !1; break } n('<div class="fancybox-inline-tmp" />').hide().insertBefore(n(t)).bind("fancybox-cleanup", function () { n(this).replaceWith(e.children()) }).bind("fancybox-cancel", function () { n(this).replaceWith(s.children()) }); n(t).appendTo(s); rt(); break; case "image": u = !1; n.fancybox.showActivity(); b = new Image; b.onerror = function () { lt() }; b.onload = function () { u = !0; b.onerror = b.onload = null; i.width = b.width; i.height = b.height; n("<img />").attr({ id: "fancybox-img", src: b.src, alt: i.title }).appendTo(s); at() }; b.src = r; break; case "swf": i.scrolling = "no"; l = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="' + i.width + '" height="' + i.height + '"><param name="movie" value="' + r + '"><\/param>'; v = ""; n.each(i.swf, function (n, t) { l += '<param name="' + n + '" value="' + t + '"><\/param>'; v += " " + n + '="' + t + '"' }); l += '<embed src="' + r + '" type="application/x-shockwave-flash" width="' + i.width + '" height="' + i.height + '"' + v + "><\/embed><\/object>"; s.html(l); rt(); break; case "ajax": u = !1; n.fancybox.showActivity(); i.ajax.win = i.ajax.success; ut = n.ajax(n.extend({}, i.ajax, { url: r, data: i.ajax.data || {}, error: function (n) { n.status > 0 && lt() }, success: function (n, t, u) { if ((typeof u == "object" ? u : ut).status == 200) { if (typeof i.ajax.win == "function") { if (f = i.ajax.win(r, n, t, u), f === !1) { p.hide(); return } (typeof f == "string" || typeof f == "object") && (n = f) } s.html(n); rt() } } })); break; case "iframe": at() } } else lt() }, rt = function () { var t = i.width, r = i.height; t = t.toString().indexOf("%") > -1 ? parseInt((n(window).width() - i.margin * 2) * parseFloat(t) / 100, 10) + "px" : t == "auto" ? "auto" : t + "px"; r = r.toString().indexOf("%") > -1 ? parseInt((n(window).height() - i.margin * 2) * parseFloat(r) / 100, 10) + "px" : r == "auto" ? "auto" : r + "px"; s.wrapInner('<div style="width:' + t + ";height:" + r + ";overflow: " + (i.scrolling == "auto" ? "auto" : i.scrolling == "yes" ? "scroll" : "hidden") + ';position:relative;"><\/div>'); i.width = s.width(); i.height = s.height(); at() }, at = function () { var b, rt; if (p.hide(), r.is(":visible") && !1 === t.onCleanup(o, l, t)) n.event.trigger("fancybox-cancel"), u = !1; else { if (u = !0, n(e.add(w)).unbind(), n(window).unbind("resize.fb scroll.fb"), n(document).unbind("keydown.fb"), r.is(":visible") && t.titlePosition !== "outside" && r.css("height", r.height()), o = c, l = a, t = i, t.overlayShow ? (w.css({ "background-color": t.overlayColor, opacity: t.overlayOpacity, cursor: t.hideOnOverlayClick ? "pointer" : "auto", height: n(document).height() }), w.is(":visible") || (ht && n("select:not(#fancybox-tmp select)").filter(function () { return this.style.visibility !== "hidden" }).css({ visibility: "hidden" }).one("fancybox-cleanup", function () { this.style.visibility = "inherit" }), w.show())) : w.hide(), f = dt(), y = t.title || "", k = 0, h.empty().removeAttr("style").removeClass(), t.titleShow !== !1 && (b = n.isFunction(t.titleFormat) ? t.titleFormat(y, o, l, t) : y && y.length ? t.titlePosition == "float" ? '<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"><\/td><td id="fancybox-title-float-main">' + y + '<\/td><td id="fancybox-title-float-right"><\/td><\/tr><\/table>' : '<div id="fancybox-title-' + t.titlePosition + '">' + y + "<\/div>" : !1, y = b, !(!y || y === ""))) { h.addClass("fancybox-title-" + t.titlePosition).html(y).appendTo("body").show(); switch (t.titlePosition) { case "inside": h.css({ width: f.width - t.padding * 2, marginLeft: t.padding, marginRight: t.padding }); k = h.outerHeight(!0); h.appendTo(tt); f.height += k; break; case "over": h.css({ marginLeft: t.padding, width: f.width - t.padding * 2, bottom: t.padding }).appendTo(tt); break; case "float": h.css("left", parseInt((h.width() - f.width - 40) / 2, 10) * -1).appendTo(r); break; default: h.css({ width: f.width - t.padding * 2, paddingLeft: t.padding, paddingRight: t.padding }).appendTo(r) } } h.hide(); r.is(":visible") ? (n(it.add(d).add(g)).hide(), b = r.position(), v = { top: b.top, left: b.left, width: r.width(), height: r.height() }, rt = v.width == f.width && v.height == f.height, e.fadeTo(t.changeFade, .3, function () { var r = function () { e.html(s.contents()).fadeTo(t.changeFade, 1, vt) }; n.event.trigger("fancybox-change"); e.empty().removeAttr("filter").css({ "border-width": t.padding, width: f.width - t.padding * 2, height: i.autoDimensions ? "auto" : f.height - k - t.padding * 2 }); rt ? r() : (nt.prop = 0, n(nt).animate({ prop: 1 }, { duration: t.changeSpeed, easing: t.easingChange, step: yt, complete: r })) })) : (r.removeAttr("style"), e.css("border-width", t.padding), t.transitionIn == "elastic" ? (v = wt(), e.html(s.contents()), r.show(), t.opacity && (f.opacity = 0), nt.prop = 0, n(nt).animate({ prop: 1 }, { duration: t.speedIn, easing: t.easingIn, step: yt, complete: vt })) : (t.titlePosition == "inside" && k > 0 && h.show(), e.css({ width: f.width - t.padding * 2, height: i.autoDimensions ? "auto" : f.height - k - t.padding * 2 }).html(s.contents()), r.css(f).fadeIn(t.transitionIn == "none" ? 0 : t.speedIn, vt))) } }, kt = function () { (t.enableEscapeButton || t.enableKeyboardNav) && n(document).bind("keydown.fb", function (i) { i.keyCode == 27 && t.enableEscapeButton ? (i.preventDefault(), n.fancybox.close()) : (i.keyCode == 37 || i.keyCode == 39) && t.enableKeyboardNav && i.target.tagName !== "INPUT" && i.target.tagName !== "TEXTAREA" && i.target.tagName !== "SELECT" && (i.preventDefault(), n.fancybox[i.keyCode == 37 ? "prev" : "next"]()) }); t.showNavArrows ? ((t.cyclic && o.length > 1 || l !== 0) && d.show(), (t.cyclic && o.length > 1 || l != o.length - 1) && g.show()) : (d.hide(), g.hide()) }, vt = function () { n.support.opacity || (e.get(0).style.removeAttribute("filter"), r.get(0).style.removeAttribute("filter")); i.autoDimensions && e.css("height", "auto"); r.css("height", "auto"); y && y.length && h.show(); t.showCloseButton && it.show(); kt(); t.hideOnContentClick && e.bind("click", n.fancybox.close); t.hideOnOverlayClick && w.bind("click", n.fancybox.close); n(window).bind("resize.fb", n.fancybox.resize); t.centerOnScroll && n(window).bind("scroll.fb", n.fancybox.center); t.type == "iframe" && n('<iframe id="fancybox-frame" name="fancybox-frame' + (new Date).getTime() + '" frameborder="0" hspace="0" ' + (n.browser.msie ? 'allowtransparency="true""' : "") + ' scrolling="' + i.scrolling + '" src="' + t.href + '"><\/iframe>').appendTo(e); r.show(); u = !1; n.fancybox.center(); t.onComplete(o, l, t); var f, s; o.length - 1 > l && (f = o[l + 1].href, typeof f != "undefined" && f.match(et) && (s = new Image, s.src = f)); l > 0 && (f = o[l - 1].href, typeof f != "undefined" && f.match(et) && (s = new Image, s.src = f)) }, yt = function (n) { var i = { width: parseInt(v.width + (f.width - v.width) * n, 10), height: parseInt(v.height + (f.height - v.height) * n, 10), top: parseInt(v.top + (f.top - v.top) * n, 10), left: parseInt(v.left + (f.left - v.left) * n, 10) }; typeof f.opacity != "undefined" && (i.opacity = n < .5 ? .5 : n); r.css(i); e.css({ width: i.width - t.padding * 2, height: i.height - k * n - t.padding * 2 }) }, pt = function () { return [n(window).width() - t.margin * 2, n(window).height() - t.margin * 2, n(document).scrollLeft() + t.margin, n(document).scrollTop() + t.margin] }, dt = function () { var r = pt(), n = {}, f = t.autoScale, u = t.padding * 2; return n.width = t.width.toString().indexOf("%") > -1 ? parseInt(r[0] * parseFloat(t.width) / 100, 10) : t.width + u, n.height = t.height.toString().indexOf("%") > -1 ? parseInt(r[1] * parseFloat(t.height) / 100, 10) : t.height + u, f && (n.width > r[0] || n.height > r[1]) && (i.type == "image" || i.type == "swf" ? (f = t.width / t.height, n.width > r[0] && (n.width = r[0], n.height = parseInt((n.width - u) / f + u, 10)), n.height > r[1] && (n.height = r[1], n.width = parseInt((n.height - u) * f + u, 10))) : (n.width = Math.min(n.width, r[0]), n.height = Math.min(n.height, r[1]))), n.top = parseInt(Math.max(r[3] - 20, r[3] + (r[1] - n.height - 40) * .5), 10), n.left = parseInt(Math.max(r[2] - 20, r[2] + (r[0] - n.width - 40) * .5), 10), n }, wt = function () { var r = i.orig ? n(i.orig) : !1, u = {}; return r && r.length ? (u = r.offset(), u.top += parseInt(r.css("paddingTop"), 10) || 0, u.left += parseInt(r.css("paddingLeft"), 10) || 0, u.top += parseInt(r.css("border-top-width"), 10) || 0, u.left += parseInt(r.css("border-left-width"), 10) || 0, u.width = r.width(), u.height = r.height(), u = { width: u.width + t.padding * 2, height: u.height + t.padding * 2, top: u.top - t.padding - 20, left: u.left - t.padding - 20 }) : (r = pt(), u = { width: t.padding * 2, height: t.padding * 2, top: parseInt(r[3] + r[1] * .5, 10), left: parseInt(r[2] + r[0] * .5, 10) }), u }, gt = function () { p.is(":visible") ? (n("div", p).css("top", st * -40 + "px"), st = (st + 1) % 12) : clearInterval(ot) }; n.fn.fancybox = function (t) { return n(this).length ? (n(this).data("fancybox", n.extend({}, t, n.metadata ? n(this).metadata() : {})).unbind("click.fb").bind("click.fb", function (t) { t.preventDefault(); u || (u = !0, n(this).blur(), c = [], a = 0, t = n(this).attr("rel") || "", t && t != "" && t !== "nofollow" ? (c = n("a[rel=" + t + "], area[rel=" + t + "]"), a = c.index(this)) : c.push(this), ft()) }), this) : this }; n.fancybox = function (t, i) { var f, r, e; if (!u) { if (u = !0, f = typeof i != "undefined" ? i : {}, c = [], a = parseInt(f.index, 10) || 0, n.isArray(t)) { for (r = 0, e = t.length; r < e; r++) typeof t[r] == "object" ? n(t[r]).data("fancybox", n.extend({}, f, t[r])) : t[r] = n({}).data("fancybox", n.extend({ content: t[r] }, f)); c = jQuery.merge(c, t) } else typeof t == "object" ? n(t).data("fancybox", n.extend({}, f, t)) : t = n({}).data("fancybox", n.extend({ content: t }, f)), c.push(t); (a > c.length || a < 0) && (a = 0); ft() } }; n.fancybox.showActivity = function () { clearInterval(ot); p.show(); ot = setInterval(gt, 66) }; n.fancybox.hideActivity = function () { p.hide() }; n.fancybox.next = function () { return n.fancybox.pos(l + 1) }; n.fancybox.prev = function () { return n.fancybox.pos(l - 1) }; n.fancybox.pos = function (n) { u || (n = parseInt(n), c = o, n > -1 && n < o.length ? (a = n, ft()) : t.cyclic && o.length > 1 && (a = n >= o.length ? 0 : o.length - 1, ft())) }; n.fancybox.cancel = function () { if (!u) { u = !0; n.event.trigger("fancybox-cancel"); ct(); i.onCancel(c, a, i); u = !1 } }; n.fancybox.close = function () { function s() { w.fadeOut("fast"); h.empty().hide(); r.hide(); n.event.trigger("fancybox-cleanup"); e.empty(); t.onClosed(o, l, t); o = i = []; l = a = 0; t = i = {}; u = !1 } if (!(u || r.is(":hidden"))) if (u = !0, t && !1 === t.onCleanup(o, l, t)) u = !1; else if (ct(), n(it.add(d).add(g)).hide(), n(e.add(w)).unbind(), n(window).unbind("resize.fb scroll.fb"), n(document).unbind("keydown.fb"), e.find("iframe").attr("src", ht && /^https/i.test(window.location.href || "") ? "javascript:void(false)" : "about:blank"), t.titlePosition !== "inside" && h.empty(), r.stop(), t.transitionOut == "elastic") { v = wt(); var c = r.position(); f = { top: c.top, left: c.left, width: r.width(), height: r.height() }; t.opacity && (f.opacity = 1); h.empty().hide(); nt.prop = 1; n(nt).animate({ prop: 0 }, { duration: t.speedOut, easing: t.easingOut, step: yt, complete: s }) } else r.fadeOut(t.transitionOut == "none" ? 0 : t.speedOut, s) }; n.fancybox.resize = function () { w.is(":visible") && w.css("height", n(document).height()); n.fancybox.center(!0) }; n.fancybox.center = function (n) { var i, f; u || (f = n === !0 ? 1 : 0, i = pt(), !f && (r.width() > i[0] || r.height() > i[1]) || r.stop().animate({ top: parseInt(Math.max(i[3] - 20, i[3] + (i[1] - e.height() - 40) * .5 - t.padding)), left: parseInt(Math.max(i[2] - 20, i[2] + (i[0] - e.width() - 40) * .5 - t.padding)) }, typeof n == "number" ? n : 200)) }; n.fancybox.init = function () { n("#fancybox-wrap").length || (n("body").append(s = n('<div id="fancybox-tmp"><\/div>'), p = n('<div id="fancybox-loading"><div><\/div><\/div>'), w = n('<div id="fancybox-overlay"><\/div>'), r = n('<div id="fancybox-wrap"><\/div>')), tt = n('<div id="fancybox-outer"><\/div>').append('<div class="fancybox-bg" id="fancybox-bg-n"><\/div><div class="fancybox-bg" id="fancybox-bg-ne"><\/div><div class="fancybox-bg" id="fancybox-bg-e"><\/div><div class="fancybox-bg" id="fancybox-bg-se"><\/div><div class="fancybox-bg" id="fancybox-bg-s"><\/div><div class="fancybox-bg" id="fancybox-bg-sw"><\/div><div class="fancybox-bg" id="fancybox-bg-w"><\/div><div class="fancybox-bg" id="fancybox-bg-nw"><\/div>').appendTo(r), tt.append(e = n('<div id="fancybox-content"><\/div>'), it = n('<a id="fancybox-close"><\/a>'), h = n('<div id="fancybox-title"><\/div>'), d = n('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"><\/span><\/a>'), g = n('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"><\/span><\/a>')), it.click(n.fancybox.close), p.click(n.fancybox.cancel), d.click(function (t) { t.preventDefault(); n.fancybox.prev() }), g.click(function (t) { t.preventDefault(); n.fancybox.next() }), n.fn.mousewheel && r.bind("mousewheel.fb", function (t, i) { u ? t.preventDefault() : (n(t.target).get(0).clientHeight == 0 || n(t.target).get(0).scrollHeight === n(t.target).get(0).clientHeight) && (t.preventDefault(), n.fancybox[i > 0 ? "prev" : "next"]()) }), n.support.opacity || r.addClass("fancybox-ie"), ht && (p.addClass("fancybox-ie6"), r.addClass("fancybox-ie6"), n('<iframe id="fancybox-hide-sel-frame" src="' + (/^https/i.test(window.location.href || "") ? "javascript:void(false)" : "about:blank") + '" scrolling="no" border="0" frameborder="0" tabindex="-1"><\/iframe>').prependTo(tt))) }; n.fn.fancybox.defaults = { padding: 10, margin: 40, opacity: !1, modal: !1, cyclic: !1, scrolling: "auto", width: 560, height: 340, autoScale: !0, autoDimensions: !0, centerOnScroll: !1, ajax: {}, swf: { wmode: "transparent" }, hideOnOverlayClick: !0, hideOnContentClick: !1, overlayShow: !0, overlayOpacity: .7, overlayColor: "#222", titleShow: !0, titlePosition: "float", titleFormat: null, titleFromAlt: !1, transitionIn: "fade", transitionOut: "fade", speedIn: 300, speedOut: 300, changeSpeed: 300, changeFade: "fast", easingIn: "swing", easingOut: "swing", showCloseButton: !0, showNavArrows: !0, enableEscapeButton: !0, enableKeyboardNav: !0, onStart: function () { }, onCancel: function () { }, onComplete: function () { }, onCleanup: function () { }, onClosed: function () { }, onError: function () { } }; n(document).ready(function () { n.fancybox.init() }) }(jQuery), function (n) { n.widget("ui.stars", { options: { inputType: "radio", split: 0, disabled: !1, cancelTitle: "Cancel Rating", cancelValue: 0, cancelShow: !0, disableValue: !0, oneVoteOnly: !1, showTitles: !1, captionEl: null, callback: null, starWidth: 16, cancelClass: "ui-stars-cancel", starClass: "ui-stars-star", starOnClass: "ui-stars-star-on", starHoverClass: "ui-stars-star-hover", starDisabledClass: "ui-stars-star-disabled", cancelHoverClass: "ui-stars-cancel-hover", cancelDisabledClass: "ui-stars-cancel-disabled" }, _create: function () { function u(n, r) { if (n != -1) { var u = r ? t.starHoverClass : t.starOnClass, e = r ? t.starOnClass : t.starHoverClass; i.$stars.eq(n).prevAll("." + t.starClass).andSelf().removeClass(e).addClass(u); i.$stars.eq(n).nextAll("." + t.starClass).removeClass(t.starHoverClass + " " + t.starOnClass); i._showCap(t.id2title[n]) } else f() } function f() { i.$stars.removeClass(t.starOnClass + " " + t.starHoverClass); i._showCap("") } var i = this, t = this.options, r = 0; this.element.data("former.stars", this.element.html()); t.isSelect = t.inputType == "select"; this.$form = n(this.element).closest("form"); this.$selec = t.isSelect ? n("select", this.element) : null; this.$rboxs = t.isSelect ? n("option", this.$selec) : n(":radio", this.element); this.$stars = this.$rboxs.map(function (u) { var f = { value: this.value, title: (t.isSelect ? this.text : this.title) || this.value, isDefault: t.isSelect && this.defaultSelected || this.defaultChecked }, e, o, h, s; return (u == 0 && (t.split = typeof t.split != "number" ? 0 : t.split, t.val2id = [], t.id2val = [], t.id2title = [], t.name = t.isSelect ? i.$selec.get(0).name : this.name, t.disabled = t.disabled || (t.isSelect ? n(i.$selec).attr("disabled") : n(this).attr("disabled"))), f.value == t.cancelValue) ? (t.cancelTitle = f.title, null) : (t.val2id[f.value] = r, t.id2val[r] = f.value, t.id2title[r] = f.title, f.isDefault && (t.checked = r, t.value = t.defaultValue = f.value, t.title = f.title), e = n("<div/>").addClass(t.starClass), o = n("<a/>").attr("title", t.showTitles ? f.title : "").text(f.value), t.split && (h = r % t.split, s = Math.floor(t.starWidth / t.split), e.width(s), o.css("margin-left", "-" + h * s + "px")), r++, e.append(o).get(0)) }); t.items = r; t.isSelect ? this.$selec.remove() : this.$rboxs.remove(); this.$cancel = n("<div/>").addClass(t.cancelClass).append(n("<a/>").attr("title", t.showTitles ? t.cancelTitle : "").text(t.cancelValue)); t.cancelShow &= !t.disabled && !t.oneVoteOnly; t.cancelShow && this.element.append(this.$cancel); this.element.append(this.$stars); t.checked === undefined && (t.checked = -1, t.value = t.defaultValue = t.cancelValue, t.title = ""); this.$value = n("<input type='hidden' name='" + t.name + "' value='" + t.value + "' />"); this.element.append(this.$value); this.$stars.bind("click.stars", function (n) { if (!t.forceSelect && t.disabled) return !1; var r = i.$stars.index(this); t.checked = r; t.value = t.id2val[r]; t.title = t.id2title[r]; i.$value.attr({ disabled: t.disabled ? "disabled" : "", value: t.value }); u(r, !1); i._disableCancel(); t.forceSelect || i.callback(n, "star") }).bind("mouseover.stars", function () { if (t.disabled) return !1; var n = i.$stars.index(this); u(n, !0) }).bind("mouseout.stars", function () { if (t.disabled) return !1; u(i.options.checked, !1) }); this.$cancel.bind("click.stars", function (n) { if (!t.forceSelect && (t.disabled || t.value == t.cancelValue)) return !1; t.checked = -1; t.value = t.cancelValue; t.title = ""; i.$value.val(t.value); t.disableValue && i.$value.attr({ disabled: "disabled" }); f(); i._disableCancel(); t.forceSelect || i.callback(n, "cancel") }).bind("mouseover.stars", function () { if (i._disableCancel()) return !1; i.$cancel.addClass(t.cancelHoverClass); f(); i._showCap(t.cancelTitle) }).bind("mouseout.stars", function () { if (i._disableCancel()) return !1; i.$cancel.removeClass(t.cancelHoverClass); i.$stars.triggerHandler("mouseout.stars") }); this.$form.bind("reset.stars", function () { t.disabled || i.select(t.defaultValue) }); n(window).unload(function () { i.$cancel.unbind(".stars"); i.$stars.unbind(".stars"); i.$form.unbind(".stars"); i.$selec = i.$rboxs = i.$stars = i.$value = i.$cancel = i.$form = null }); this.select(t.value); t.disabled && this.disable() }, _disableCancel: function () { var n = this.options, t = n.disabled || n.oneVoteOnly || n.value == n.cancelValue; return t ? this.$cancel.removeClass(n.cancelHoverClass).addClass(n.cancelDisabledClass) : this.$cancel.removeClass(n.cancelDisabledClass), this.$cancel.css("opacity", t ? .5 : 1), t }, _disableAll: function () { var n = this.options; this._disableCancel(); n.disabled ? this.$stars.filter("div").addClass(n.starDisabledClass) : this.$stars.filter("div").removeClass(n.starDisabledClass) }, _showCap: function (n) { var t = this.options; t.captionEl && t.captionEl.text(n) }, value: function () { return this.options.value }, select: function (n) { var t = this.options, i = n == t.cancelValue ? this.$cancel : this.$stars.eq(t.val2id[n]); t.forceSelect = !0; i.triggerHandler("click.stars"); t.forceSelect = !1 }, selectID: function (n) { var t = this.options, i = n == -1 ? this.$cancel : this.$stars.eq(n); t.forceSelect = !0; i.triggerHandler("click.stars"); t.forceSelect = !1 }, enable: function () { this.options.disabled = !1; this._disableAll() }, disable: function () { this.options.disabled = !0; this._disableAll() }, destroy: function () { return this.$form.unbind(".stars"), this.$cancel.unbind(".stars").remove(), this.$stars.unbind(".stars").remove(), this.$value.remove(), this.element.unbind(".stars").html(this.element.data("former.stars")).removeData("stars"), this }, callback: function (n, t) { var i = this.options; i.callback && i.callback(this, t, i.value, n); i.oneVoteOnly && !i.disabled && this.disable() } }); n.extend(n.ui.stars, { version: "3.0.1" }) }(jQuery); jQuery.cookie = function (n, t, i) { var u, r, f, e; return arguments.length > 1 && String(t) !== "[object Object]" ? (i = jQuery.extend({}, i), (t === null || t === undefined) && (i.expires = -1), typeof i.expires == "number" && (u = i.expires, r = i.expires = new Date, r.setDate(r.getDate() + u)), t = String(t), document.cookie = [encodeURIComponent(n), "=", i.raw ? t : encodeURIComponent(t), i.expires ? "; expires=" + i.expires.toUTCString() : "", i.path ? "; path=" + i.path : "", i.domain ? "; domain=" + i.domain : "", i.secure ? "; secure" : ""].join("")) : (i = t || {}, e = i.raw ? function (n) { return n } : decodeURIComponent, (f = new RegExp("(?:^|; )" + encodeURIComponent(n) + "=([^;]*)").exec(document.cookie)) ? e(f[1]) : null) }; var emoticons = { emoticon: { "::smile": { image: "smile.gif", emotes: { ":-)": "", ":)": "" } }, "::grin": { image: "grin.gif", emotes: { ":D": "", ":-D": "" } }, "::sad": { image: "sad.gif", emotes: { ":(": "", ":-(": "" } }, "::eek": { image: "eek.gif", emotes: { ":o": "", ":-o": "" } }, "::shock": { image: "shock.gif", emotes: { "8O": "", "8-O": "" } }, "::conf": { image: "conf.gif", emotes: { ":?": "", ":-?": "" } }, "::cool": { image: "cool.gif", emotes: { "8)": "", "8-)": "" } }, "::mad": { image: "mad.gif", emotes: { ":x": "", ":-x": "" } }, "::razz": { image: "razz.gif", emotes: { ":P": "", ":-P": "" } }, "::neutral": { image: "neutral.gif", emotes: { ":|": "", ":-|": "" } }, "::wink": { image: "wink.gif", emotes: { ";)": "", ";-)": "" } } } }; RegExp.escape = function (n) { if (!arguments.callee.sRE) arguments.callee.sRE = new RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)", "g"); return n.replace(arguments.callee.sRE, "\\$1") }; $.fn.emoticon = function (n) { var i = n, r, t; for (r in emoticons.emoticon) { emoticon = emoticons.emoticon[r]; for (t in emoticon.emotes) t = RegExp.escape(t), i = i.replace(new RegExp(t, "gi"), '<img src="http://cdn.gollos.com/common/smile/' + emoticon.image + '" />') } return i }; String.prototype.format = function (n) { var t = this; return t.replace(String.prototype.format.regex, function (t) { var i = parseInt(t.substring(1, t.length - 1)); return i >= 0 ? n[i] : i === -1 ? "{" : i === -2 ? "}" : "" }) }; String.prototype.format.regex = new RegExp("{-?[0-9]+}", "g");

var gl; function Gollos() { gl = this; this.incart = []; this.language = "en"; this.showCartNotify = false; this.doNotAddToCart = false; this.onAddToCart = []; this.onDeleteFromCart = []; this.msgCaptchaError = "Invalid code!"; this.msgAddedToCart = "Added to Cart"; this.handlerCart = "/handler/cart.ashx"; this.handlerRichCart = "/handler/getCart.ashx"; this.handlerAjax = "/handler/ajax.ashx"; this.handlerCheckUser = "/handler/checkUser.ashx"; this.handlerCaptcha = "/handler/captcha.ashx"; this.handlerFeedback = "/handler/feedback.ashx"; this.handlerCurrency = "/handler/currency.ashx"; this.ajaxImage = "<img id='loader' src='http://cdn.gollos.com/common/loading.gif' />"; this.BindAddToCart(this.ShowCart); this.BindDeleteFromCart(this.ShowCart) } Gollos.prototype.GetAjaxHandler = function (t) { return gl.handlerAjax + "?t=" + t }; Gollos.prototype.onAddToCartTrigger = function (productID) { if (typeof gl.onAddToCart != "undefined" && gl.onAddToCart.length > 0) { var i = 0; for (i = 0; i < gl.onAddToCart.length; i++) { gl.onAddToCart[i](productID) } } }; Gollos.prototype.BindAddToCart = function (fn) { gl.onAddToCart[gl.onAddToCart.length] = fn }; Gollos.prototype.UnbindAddToCart = function (fn) { var i = 0; for (i = 0; i < gl.onAddToCart.length; i++) { if (gl.onAddToCart[i] == fn) { gl.onAddToCart.splice(i, 1); break } } }; Gollos.prototype.onDeleteFromCartTrigger = function () { if (typeof gl.onDeleteFromCart != "undefined" && gl.onDeleteFromCart.length > 0) { var i = 0; for (i = 0; i < gl.onDeleteFromCart.length; i++) { gl.onDeleteFromCart[i]() } } }; Gollos.prototype.BindDeleteFromCart = function (fn) { gl.onDeleteFromCart[gl.onDeleteFromCart.length] = fn }; Gollos.prototype.UnbindDeleteFromCart = function (fn) { var i = 0; for (i = 0; i < gl.onDeleteFromCart.length; i++) { if (gl.onDeleteFromCart[i] == fn) { gl.onDeleteFromCart.splice(i, 1); break } } }; Gollos.prototype.AddToCartHandler = function (productID, variant, price, qty) { $.ajax({ url: gl.handlerCart, type: "POST", data: ({ id: productID, i: variant, p: price, q: qty }), dataType: "html", success: function (data, status) { gl.ShowRichCart(($("#rCart").length > 0 && $("#rCartBody").is(":visible"))); gl.onAddToCartTrigger(productID); gl.ShowAddToCartNotify(productID) } }) }; Gollos.prototype.AddToCart = function (productID) { gl.AddToCartHandler(productID, "", "", 1) }; Gollos.prototype.AddToCartWithQty = function (productID, qty) { gl.AddToCartHandler(productID, "", "", qty) }; Gollos.prototype.AddToCartByLinkWithVariants = function (link, newImage, hasVariant) { if (hasVariant) { var url = $(link).data("url"); $(link).attr("href", url).attr("onclick", ""); $(this).click() } else { AddToCartByLink(link, newImage) } }; Gollos.prototype.AddToCartByLink = function (link, newImage) { var info = ""; var price = ""; var qty = 1; var productID = link.id.replace("i", ""); if ($("#qty" + productID).length > 0) { qty = $("#qty" + productID).val() } if ($(".ProductVariant").length > 0) { $("#ProductVariantList").each(function () { $(".ProductVariant", this).each(function () { if (!gl.doNotAddToCart) { info += $(this).find("label").text() + " " + $(this).find("select :selected").text() + ", "; price += $(this).find("select :selected").attr("p") + ","; $(this).find("select :selected").parent().removeClass("invalid") } else { if ($(this).find("select :selected").val() != "-") { info += $(this).find("label").text() + " " + $(this).find("select :selected").text() + ", "; price += $(this).find("select :selected").attr("p") + ","; $(this).find("select :selected").parent().removeClass("invalid") } else { $(this).find("select :selected").parent().css("border", "2px solid red"); $(this).find("select :selected").parent().addClass("invalid") } } }) }); if ($("#ProductVariantList").find(".invalid").length == 0) { gl.AddToCartHandler(productID, info, price, qty) } $(link).fadeOut(100).fadeIn(100) } else { $(link).attr("href", "/cart").attr("onclick", "").attr("class", "addedToCart").attr("title", gl.msgAddedToCart); if (newImage == "") { $(link).text(gl.msgAddedToCart) } else { $(link).children(":first").attr("src", newImage) } gl.AddToCartHandler(productID, info, price, qty) } gl.Animate(link, "bounceIn"); return false }; Gollos.prototype.ShowAddedToCart = function (newImage) { if (typeof gl.incart != "undefined" && gl.incart.length > 0) { for (i in gl.incart) { var link = document.getElementById("i" + gl.incart[i]); if (link != null) { $(link).attr("href", "/cart").attr("onclick", "").attr("class", "addedToCart").attr("title", gl.msgAddedToCart); if (newImage == "") { $(link).text(gl.msgAddedToCart) } else { var oldImage = $(link).children(":first").attr("src"); $(link).children(":first").attr("src", newImage).attr("old", oldImage) } } } } }; Gollos.prototype.ShowCart = function () { $.get(gl.handlerCart + "?t=3", function (data) { $("#cart").fadeOut(200, function () { $("#cart").replaceWith(data).fadeIn(200) }) }, "text") }; Gollos.prototype.ShowCartIn = function (elementID) { $.get(gl.handlerCart + "?t=3", function (data) { $("#" + elementID).html(data) }, "text") }; Gollos.prototype.Animate = function (link, anime) { $(link).removeClass(anime).addClass("animated").addClass(anime); var wait = window.setTimeout(function () { $(link).removeClass("animated").removeClass(anime) }, 1300) }; Gollos.prototype.ShowRichCart = function (showList) { $.get(gl.handlerRichCart, function (data) { if ($("#rCart").length > 0) { $("#rCart").replaceWith(data) } else { $("body").append(data) } if (showList) { $("#rCartBody").show(); $("#rCartTitle").hide() } $("#rCartBody .rCartItem").hover(function () { $(this).addClass("rCartItemHover") }, function () { $(this).removeClass("rCartItemHover") }) }, "text") }; Gollos.prototype.ShowHint = function () { var el = $(".inputWithTitle"); el.each(function (i) { $(this).attr("value", $(this).attr("title")); $(this).addClass("inputWithTitleGray") }); el.focus(function () { if ($(this).attr("value") == $(this).attr("title")) { $(this).attr("value", "").removeClass("inputWithTitleGray") } }).blur(function () { if ($(this).attr("value") == "") { $(this).attr("value", $(this).attr("title")).addClass("inputWithTitleGray") } }) }; Gollos.prototype.ShowHelp = function (page) { var width = 600; var height = 500; var left = parseInt((screen.availWidth / 2) - (width / 2)); var top = parseInt((screen.availHeight / 2) - (height / 2)); w = window.open("/information/" + page, "help", "scrollbars=yes,resizable=yes,width=" + width + ",height=" + height + ",top=" + top + ",left=" + left + "screenX=" + left + ",screenY=" + top); w.focus() }; Gollos.prototype.ShowPollResult = function () { $.get(gl.GetAjaxHandler(15) + "&i=" + $("#hfpub").val(), function (data) { $(".pollVote").hide(); $("#poll").html(data); $("#pollGoVote").click(function () { $("#poll").html(""); $(".pollVote").show() }) }, "text") }; Gollos.prototype.ShowComments = function () { if ($("#commentForm").length > 0) { $("#commentForm").validate() } if ($("#ratings").length > 0) { $("#ratings").children().not("select").hide(); $caption = $("<span/>"); $("#ratings").stars({ cancelShow: false, inputType: "select", captionEl: $caption }); $caption.appendTo("#ratings") } if ($("#commentlist").length > 0) { $("#commentlist p, #commentlist .title").each(function (i) { var str = $(this).html(); $(this).html($().emoticon(str)) }); $("#cancelReply").hide(); $("a.Product-comment-reply").click(function (e) { $("#AddCommentProduct").attr("p", $(this).attr("id").replace("reply-", "")); $("#cancelReply").show(); gl.goToMe("#comment_add") }); $("a.Publication-comment-reply").click(function (e) { $("#AddCommentPublication").attr("p", $(this).attr("id").replace("reply-", "")); $("#cancelReply").show(); gl.goToMe("#comment_add") }) } }; Gollos.prototype.SetCurrency = function (currencyCode) { $.post(gl.handlerCurrency, { currency: currencyCode }, function (data) { window.location.reload() }, "text"); return false }; Gollos.prototype.AddProductComment = function () { if (gl.CheckCAPTCHA()) { if ($("#comment_text").hasClass("valid") && $("#comment_subject").hasClass("valid")) { $("#AddCommentProduct").fadeOut(); $.post(gl.GetAjaxHandler(12), { parent: $("#AddCommentProduct").attr("p"), subject: $("#comment_subject").val(), text: $("#comment_text").val(), email: $("#comment_email").val(), url: $("#comment_url").val(), pid: $("#comment_pid").val(), rate: $("input[name=rate]").val(), code: $("#captchaCode").val() }, function (data) { if (data.length > 0) { $("#commentlist").replaceWith(data); gl.ShowComments(); gl.goToMe("#comment-" + $("#AddCommentProduct").attr("p") + " li:last"); $("#comment_subject").val(""); $("#comment_text").val(""); $("#captchaCode").val(""); $("#comment_email").val(""); $("#AddCommentProduct").attr("p", "").show(); gl.Animate("#AddCommentProduct", "bounceIn"); $("#captchaImage").attr("src", gl.handlerCaptcha + "?" + new Date().getTime()) } }, "text") } } return false }; Gollos.prototype.AddPublicationComment = function () { if (gl.CheckCAPTCHA()) { if ($("#comment_text").hasClass("valid") && $("#comment_subject").hasClass("valid")) { $("#AddCommentPublication").fadeOut(); $.post(gl.GetAjaxHandler(13), { parent: $("#AddCommentPublication").attr("p"), subject: $("#comment_subject").val(), text: $("#comment_text").val(), email: $("#comment_email").val(), url: $("#comment_url").val(), pid: $("#comment_pid").val(), code: $("#captchaCode").val() }, function (data) { if (data.length > 0) { $("#commentlist").replaceWith(data); gl.ShowComments(); gl.goToMe("#comment-" + $("#AddCommentPublication").attr("p") + " li:last"); $("#comment_subject").val(""); $("#comment_text").val(""); $("#captchaCode").val(""); $("#comment_email").val(""); $("#AddCommentPublication").attr("p", "").show(); gl.Animate("#AddCommentPublication", "bounceIn"); $("#captchaImage").attr("src", gl.handlerCaptcha + "?" + new Date().getTime()) } }, "text") } } return false }; Gollos.prototype.RecoveryPassword = function () { $("#recoveryForm").validate().form(); if ($("#recoveryForm").valid()) { $("#RecoveryResult").html(gl.ajaxImage); $.post(gl.GetAjaxHandler(10) + "&d=" + $("#RecoveryEmail").val(), function (data) { $("#loader").remove(); $("#RecoveryResult").html(data) }) } }; Gollos.prototype.ChangePassword = function () { if ($("#RecoveryPass1").val() == $("#RecoveryPass2").val()) { $("#RecoveryChangeResult").html(gl.ajaxImage); $.post(gl.GetAjaxHandler(11) + "&d=" + getUrlParam("u") + "&ri=" + getUrlParam("i"), { pass: $("#RecoveryPass1").val() }, function (data) { $("#loader").remove(); $("#RecoveryChangeResult").html(data) }) } }; Gollos.prototype.DeleteCartItem = function (id) { $.get(gl.GetAjaxHandler(2) + "&i=" + id, function (data) { if (data == "True") { gl.onDeleteFromCartTrigger(); gl.ShowRichCart(($("#rCart").length > 0 && $("#rCartBody").is(":visible"))); if (gl.IsCartPageEmpty()) { return } gl.RecalculateCart() } }, "text") }; Gollos.prototype.DeleteCartItemFromCart = function (el, id) { gl.DeleteCartItem(id); $(el).parents("tr").remove() }; Gollos.prototype.RecalculateCart = function () { var el = $("#cartAmount input"); var cartItems = ""; el.each(function (i) { cartItems += $(this).attr("id") + ":" + $(this).attr("value") + ":" + $(this).attr("i") + "," }); $.get(gl.GetAjaxHandler(1) + "&d=" + cartItems, function (data) { $("#order_amount").replaceWith(data); gl.LoadCommonScript(); gl.CheckMinTotal(); gl.ShowCart(); gl.ShowRichCart(($("#rCart").length > 0 && $("#rCartBody").is(":visible"))) }) }; Gollos.prototype.CheckMinTotal = function () { $.get(gl.GetAjaxHandler(3), function (data) { if (data == "True") { $("#minimumOrder").show(); $("#orderPurchaseButton").hide() } else { $("#minimumOrder").hide(); $("#orderPurchaseButton").show() } }) }; Gollos.prototype.IsCartPageEmpty = function () { if ($("#cartAmount tr.cartItem").length == 0) { $("#cartAmount, #minimumOrder, #orderPurchaseButton, .order_amount .total, #couponField, #pointsField, #OrderDiscount").hide(); $("#cartEmptyText").show(); return true } else { return false } }; Gollos.prototype.ShowAddToCartNotify = function (id) { if (gl.showCartNotify) { $.get(gl.GetAjaxHandler(20) + "&i=" + id, function (data) { $.fancybox(data) }, "text") } }; Gollos.prototype.GetOrderProperties = function () { var orderProperty = ""; $("#purchaseCartForm").each(function () { $(".orderFieldRow", this).each(function () { var propertyValue = $(this).find(".orderFieldValue").val(); if (propertyValue != "" && propertyValue != "undefined") { orderProperty += $(this).find("label").text() + " " + propertyValue + "^" } }) }); $("#buy_orderFields").val(orderProperty) }; Gollos.prototype.AddFeedback = function () { $("#FeedbackForm").validate().form(); var name = $("#fed_realname").val(); var phone = $("#fed_phone").val(); var email = $("#fed_email").val(); var message = $("#fed_message").val(); if (name == "" || email == "" || message == "") { return false } $("#FeedbackSend").hide(); $("#divProcess").html(gl.ajaxImage); $.post(gl.handlerFeedback, { name: name, phone: phone, email: email, message: message }, function (data) { $("#loader").remove(); if (data == 1) { $("#divSuccess").fadeIn() } else { $("#FeedbackSend").fadeIn() } }); return false }; Gollos.prototype.AddCustomFeedback = function (button) { $(button).parents("form").validate().form(); if ($(button).parents("form").valid()) { $(button).hide(); var els = $(button).parents("form").find(":input"); var rep = ""; $(els).each(function () { var elType = $(this).attr("type"); if (elType == "submit") { return } else { if (elType == "checkbox" || elType == "radio") { if ($(this).is(":selected") || $(this).is(":checked")) { rep += $(this).data("title") + "-:-" + $(this).val() + "-;-" } } else { if ($(this).is("input") || $(this).is("textarea") || $(this).is("select")) { rep += $(this).data("title") + "-:-" + $(this).val() + "-;-" } } } }); var formTitle = ""; var dataAttr = $(button).attr("data-title"); if (typeof dataAttr !== "undefined" && dataAttr !== false) { formTitle = $(button).attr("data-title") } $.post(gl.handlerFeedback, { custom: rep, title: formTitle }, function (data) { $(button).parents("form").find(".SuccessMessage").fadeIn() }) } return false }; Gollos.prototype.AddOrderMessage = function () { var qid = getUrlParam("id"); $("#orderMessageAdd").hide(); $("#orderMessageAdding").html(gl.ajaxImage); $.post(gl.GetAjaxHandler(5) + "&i=" + qid + "&d=" + getUrlParam("u"), { text: $("#orderMessageText").val(), username: $("#OrderUserName").val() }, function (data) { $("#orderMessageAdding").hide(); $("#orderMessageAdd").show(); if (data == "True") { $("#orderMessageText").val(""); gl.ShowOrderMessages() } }) }; Gollos.prototype.ShowOrderMessages = function () { var qid = getUrlParam("id"); if (qid < 1) { return } $("#orderMessageRefresh").hide(); $("#orderMessageLoading").html(gl.ajaxImage); $.get(gl.GetAjaxHandler(4) + "&i=" + qid + "&d=" + getUrlParam("u"), function (data) { $("#loader").fadeOut(1000, function () { $("#orderMessages").html(data); $("#orderMessageRefresh").show() }) }, "text") }; Gollos.prototype.SeachAutocomplete = function () { var cache = {}, lastXhr; $("#search_box").autocomplete({ minLength: 2, source: function (request, response) { var term = request.term; if (term in cache) { response(cache[term]); return } lastXhr = $.getJSON(gl.GetAjaxHandler(14), request); lastXhr.complete(function (xhr) { cache[term] = $.parseJSON(xhr.responseText); if (xhr === lastXhr) { response($.parseJSON(xhr.responseText)) } }) }, select: function (event, ui) { window.location = ui.item.url } }).data("autocomplete")._renderItem = function (ul, item) { var re = new RegExp("^" + this.term.toLowerCase()); var t = item.label.toLowerCase().replace(this.term.toLowerCase(), "<b>" + this.term.toLowerCase() + "</b>"); return $("<li></li>").data("item.autocomplete", item).append("<a>" + t + "</a>").appendTo(ul) } }; Gollos.prototype.CheckCAPTCHA = function () { var c = $("#captchaCode").val(); if (c == "") { return false } var res = false; $.ajax({ url: gl.handlerCaptcha + "?t=" + c, type: "GET", dataType: "html", async: false, success: function (msg) { if (msg == "True") { res = true } else { res = false; alert(gl.msgCaptchaError) } } }); return res }; Gollos.prototype.FBLoad = function (applicationID, domain, lang) { (function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) { return } js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/" + lang + "/all.js#xfbml=1&appId=" + applicationID; fjs.parentNode.insertBefore(js, fjs) }(document, "script", "facebook-jssdk")) }; Gollos.prototype.PinterestLoad = function () { (function (d) { var f = d.getElementsByTagName("SCRIPT")[0], p = d.createElement("SCRIPT"); p.type = "text/javascript"; p.async = true; p.src = "//assets.pinterest.com/js/pinit.js"; f.parentNode.insertBefore(p, f) }(document)) }; Gollos.prototype.GPlusLoad = function () { (function () { var po = document.createElement("script"); po.type = "text/javascript"; po.async = true; po.src = "https://apis.google.com/js/plusone.js"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(po, s) })() }; Gollos.prototype.TwitterLoad = function () { !function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? "http" : "https"; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = p + "://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs) } }(document, "script", "twitter-wjs") }; Gollos.prototype.VoteNotAllowed = function () { return $.cookie("poll" + $("#hfpub").val()) == "vote" }; Gollos.prototype.goToMe = function (e) { if ($(e).length) { $("html, body").animate({ scrollTop: $(e).offset().top }, 1000) } }; Gollos.prototype.AddSubscriber = function (button) { if ($("#subscribe_mail").val().indexOf("@") == -1) { return } $(button).after(gl.ajaxImage).remove(); $.post(gl.GetAjaxHandler(7) + "&i=0&d=" + $("#subscribe_mail").val(), function (data) { if (data == "True") { $("#loader").remove(); $("#sucscribeDone, #subscribeDone").fadeIn() } }); return false }; Gollos.prototype.FilterSearch = function (searchUrl) { var priceFrom = 0; var priceTo = 0; if ($("#filter_priceFrom").length > 0) { priceFrom = $("#filter_priceFrom").val() } if ($("#filter_priceTo").length > 0) { priceTo = $("#filter_priceTo").val() } window.location = searchUrl + "&pf=" + priceFrom + "&pt=" + priceTo }; Gollos.prototype.ShowUpRichCart = function () { if ($("#rCartBody").is(":visible")) { $("#rCartTitle").show(); $("#rCartBody").slideUp(200) } else { $("#rCartTitle").hide(); $("#rCartBody").slideDown(200) } }; Gollos.prototype.HideRichCart = function () { $("#rCartBody").slideUp(200, function () { $("#rCartTitle").show() }) }; Gollos.prototype.CouponCodeSend = function (btn) { var couponMsgError = $(btn).attr("data-error"); var couponMsgSuccess = $(btn).attr("data-success"); $.get(gl.GetAjaxHandler(17) + "&d=" + $("#CouponCode").val(), function (data) { if (data == "") { alert(couponMsgError) } else { alert(couponMsgSuccess); $.fancybox.close(); gl.RecalculateCart() } }) }; Gollos.prototype.SetCoupon = function (code, needRecalculate, messageError, messageSuccess) { $.get(gl.GetAjaxHandler(17) + "&d=" + code, function (data) { if (data == "") { alert(messageError) } else { alert(messageSuccess); if (needRecalculate) { gl.RecalculateCart() } } }) }; Gollos.prototype.SetPoints = function (points, needRecalculate) { $.get(gl.GetAjaxHandler(21) + "&i=" + points, function (data) { if (needRecalculate) { gl.RecalculateCart() } }) }; Gollos.prototype.CancelPoints = function (needRecalculate) { $.get(gl.GetAjaxHandler(22), function (data) { if (needRecalculate) { gl.RecalculateCart() } }) }; Gollos.prototype.PlusOne = function (elID) { $("#" + elID).val(parseInt($("#" + elID).val(), 10) + 1) }; Gollos.prototype.MinusOne = function (elID) { var elValue = parseInt($("#" + elID).val(), 10); if (elValue > 0) { elValue-- } $("#" + elID).val(elValue) }; Gollos.prototype.LoadCommonScript = function () { $("a[rel=imageBox]").fancybox({ transitionIn: "none", transitionOut: "none", titlePosition: "inside", titleFormat: function (title, currentArray, currentIndex, currentOpts) { return title + '<span style="color: #CCCCCC; padding-left: 10px;">' + (currentIndex + 1) + " / " + currentArray.length + "</span>" } }); $("a[rel=showBox]").fancybox({ titleShow: false, showNavArrows: false, transitionIn: "none", transitionOut: "none" }); $("#InStockNotifyAdd").fancybox({ titleShow: false, showNavArrows: false, modal: false, transitionIn: "none", transitionOut: "none" }); $("#InStockNotifyCancel, .fancyboxClose").click(function () { $.fancybox.close() }) }; Gollos.prototype.GetReferrer = function () { return $.cookie("referrer") }; Gollos.prototype.GetOldPrice = function () { }; Gollos.prototype.PageLoadMain = function () { gl.LoadCommonScript(); if ($("#search_box").length > 0) { gl.SeachAutocomplete() } if ($.cookie("referrer") == null) { var sameDomain = false; try { if (window.location.hostname == document.referrer.split("/")[2]) { sameDomain = true } } catch (e) { } if (!sameDomain) { $.cookie("referrer", document.referrer) } } $("#ProductVariantList select").change(function () { var price = ""; $("#ProductVariantList").each(function () { $(".ProductVariant", this).each(function () { var vp = $(this).find("select").val(); if (vp != "-") { price += vp + ","; $(this).find("select").css("border", "1px solid #CCC") } }) }); $.ajax({ url: gl.handlerCart + "?t=2", type: "POST", data: ({ price: $("#productPriceValue").val(), cur: $("#productPriceCurrency").val(), p: price }), dataType: "html", success: function (data, status) { $("#productPrice").fadeOut(150, function () { $(this).text(data).fadeIn(150) }) } }) }); $("#pricelist tr:has(td)").hover(function () { $(this).addClass("hover") }, function () { $(this).removeClass("hover") }); $("#sortlink").hover(function () { $("ul", this).css("display", "block"); $(this).addClass("sortcur") }, function () { $("ul", this).css("display", "none"); $(this).removeClass("sortcur") }); $("#reg_username").blur(function () { $("#UserIsFree, #UserInUse").hide(); if ($(this).val() == "") { return } $.get(gl.handlerCheckUser + "?u=" + $(this).val(), function (data) { if (data == "0") { $("#UserIsFree").fadeIn() } else { $("#UserInUse").fadeIn() } }) }); $("#InStockNotifySend").click(function (e) { $.post(gl.GetAjaxHandler(9) + "&i=" + $(this).attr("i").replace("stock", ""), { name: $("#InStockNotifyName").val(), mail: $("#InStockNotifyMail").val() }, function (data) { if (data == "True") { $.fancybox.close() } }); e.preventDefault() }); $("#cancelReply").click(function () { if ($("#AddCommentProduct").length > 0) { $("#AddCommentProduct").attr("p", "") } if ($("#AddCommentPublication").length > 0) { $("#AddCommentPublication").attr("p", "") } $(this).hide() }); gl.ShowComments(); if ($("#pollVoteButton").length > 0) { if (gl.VoteNotAllowed()) { $("#pollVoteButton").attr("disabled", "disabled") } $("#pollVoteButton").click(function () { if ($(".pollVoteItem input[type='radio']:checked").length > 0 && !gl.VoteNotAllowed()) { $("#pollVoteButton").attr("disabled", "disabled"); $.get(gl.GetAjaxHandler(16) + "&i=" + $(".pollVoteItem input[type='radio']:checked").val(), function (data) { $.cookie("poll" + $("#hfpub").val(), "vote"); gl.ShowPollResult() }) } }) } $("#pollGoResult").click(function () { gl.ShowPollResult() }); if ($(".pcss3f-modal").length > 0) { $(".modal-opener").on("click", function () { if (!$("#pcss3f-overlay").length) { $("body").append('<div id="pcss3f-overlay" class="pcss3f-overlay"></div>') } form = $($(this).data("form")); $("#pcss3f-overlay").fadeIn(); form.css("top", "50%").css("left", "50%").css("margin-top", -form.outerHeight() / 2).css("margin-left", -form.outerWidth() / 2).fadeIn(); return false }); $(".modal-closer").on("click", function () { $("#pcss3f-overlay").fadeOut(); $(".pcss3f-modal").fadeOut(); return false }) } if ($(".pcss3f").length > 0) { $('<i class="icon-ok"></i><i class="icon-remove"></i>').appendTo($(".pcss3f section")); $("form.pcss3f").each(function () { $(this).validate({ errorPlacement: function (error, element) { error.appendTo(element.parent()) } }) }) } }; Gollos.prototype.PageLoadCart = function () { if (gl.IsCartPageEmpty()) { return } gl.CheckMinTotal() }; Gollos.prototype.PageLoadCheckout = function () { $("#buy_referrer").val(gl.GetReferrer()); $("#purchaseCartForm").validate(); $("#loginCartForm").validate(); $("#purchase").click(function () { $.cookie("referrer", null); gollos.GetOrderProperties() }); if (window.location.pathname == "/checkout-success") { gl.ShowOrderMessages() } if ($("#buy_country").length > 0) { $("#buy_country").change(function () { var countrySelID = $(this).val(); $.get(gl.GetAjaxHandler(18) + "&i=" + countrySelID, function (data) { $("#buy_city").empty().html(data) }) }) } }; Gollos.prototype.PageLoadProfile = function () { $("#userinfoForm").validate(); $("#userinfoEdit, #userinfoPassCh").click(function () { $(".userinfo td.field b, #userinfoEdit").hide(); $(".userinfo td.field input, .userinfo td.field select, .userinfo td.field textarea, #userinfoCancel, #userinfoSave").show() }); $("#userinfoCancel").click(function () { $(".userinfo td.field b, #userinfoEdit").show(); $(".userinfo td.field input, .userinfo td.field select, .userinfo td.field textarea, #userinfoCancel, #userinfoSave, .userinfo tr.trp").hide() }); $("#userinfoPassCh").click(function () { $(".userinfo tr.trp").toggle() }); $("#reg_subscribe").change(function () { var isUnsubscribe = !document.getElementById("reg_subscribe").checked; $.get(gl.GetAjaxHandler(23) + "&d=" + isUnsubscribe, function (data) { }) }); $("#reg_email").blur(function () { $("#UserIsFree, #UserInUse").hide(); if ($(this).val() == "") { return } $.get(gl.handlerCheckUser + "?u=" + $(this).val(), function (data) { if (data == "0") { $("#UserIsFree").fadeIn() } else { $("#UserInUse").fadeIn() } }) }); $(".userOrderCancel").click(function () { var button = $(this); var id = $(this).attr("id").replace("o", ""); $.get(gl.GetAjaxHandler(6) + "&i=" + id, function (data) { if (data == "True") { $(button).parents("div.OrderHistory").fadeOut(200) } }) }); if ($("#reg_country").length > 0) { $("#reg_country").change(function () { var countrySelID = $(this).val(); $.get(gl.GetAjaxHandler(18) + "&i=" + countrySelID, function (data) { $("#reg_city").empty().html(data) }) }) } }; Gollos.prototype.PageLoadSignup = function () { $("#registerForm").validate() }; Gollos.prototype.PageLoad = function (mid, newImage) { gl.ShowAddedToCart(newImage); gl.ShowHint(); gl.PageLoadMain(); if (mid == 9) { gl.PageLoadCart() } if (mid == 10) { gl.PageLoadCheckout() } if (mid == 12) { gl.PageLoadProfile() } if (mid == 11) { gl.PageLoadSignup() } }; Gollos.prototype.CartQtyIncrement = function (id) { $.get(gl.GetAjaxHandler(24) + "&i=" + id, function (data) { gl.RecalculateCart() }) }; Gollos.prototype.CartQtyDecrement = function (id) { $.get(gl.GetAjaxHandler(25) + "&i=" + id, function (data) { gl.RecalculateCart() }) }; var gollos = new Gollos();
